var jt=Object.defineProperty,er=Object.defineProperties;var tr=Object.getOwnPropertyDescriptors;var Xe=Object.getOwnPropertySymbols;var rr=Object.prototype.hasOwnProperty,nr=Object.prototype.propertyIsEnumerable;var Ye=(t,e,n)=>e in t?jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M=(t,e)=>{for(var n in e||(e={}))rr.call(e,n)&&Ye(t,n,e[n]);if(Xe)for(var n of Xe(e))nr.call(e,n)&&Ye(t,n,e[n]);return t},T=(t,e)=>er(t,tr(e));import{r as h,j as r,_ as sr,n as S,a as f,L as W,u as Ke,i as ir,M as or,b as ar,D as O,h as cr,V as lr,U as dr,w as ur,g as mr,c as pr,d as hr,K as V,Q as J,e as Ie,F as ge,P as N,G as Le,f as Be,Y as fr,k as _e,s as Re,l as ye,H as je,m as Me,o as et,p as re,q as $e,t as tt,C as vr,A as gr,v as _r,x as yr,y as Ve,z as rt,T as br,R as ae,B as nt,E as wr,S as xr,I as ue,J as Sr}from"./vendor.5969e41b.js";const Cr=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};Cr();const st=h.exports.createContext({firebaseConfig:{options:{projectId:"cdp-seattle-staging-dbengvtn"},settings:{}},municipality:{name:"Seattle Staging",footerLinksSections:[]}}),Er=({appConfig:t,children:e})=>r(st.Provider,{value:t,children:e}),K=()=>{const t=h.exports.useContext(st);if(t===void 0)throw new Error("useAppConfigContext must be used within a AppConfigProvider");return t};function me(t){h.exports.useEffect(()=>{if(t==null||t==="")return;const e=document.title;return document.title=t,()=>{document.title=e}},[t])}const kr={number_approved:"{number} Genehmigt",number_rejected:"{number} Abgelehnt",number_abstained:"{number} Enthaltungen",meeting_votes_caption:"Klicken Sie auf jede Zeile, um zu sehen, wie die Ratsmitglieder abgestimmt haben",legislation:"Gesetzgebung",council_decision:"Beschluss des Rates",votes:"Stimmen",meeting:"Treffen",persons_vote:"{name}s Stimee",en:"English",es:"Espa\xF1ol",de:"Deutsche",keywords:"Schl\xFCsselw\xF6rter",select_language:"Sprache ausw\xE4hlen",same:"gleich",committee:"Komitee",chair:"Vorsitzende",tenure:"Amtszeit",bills_sponsored:"Rechnung(en) gesponsert",see_documents:"Siehe Dokumente",jump_to_sentence_video:"Zum Satz im Video springen",jump_to_sentence_transcript:"Zum Satz im Transkript springen",search_transcript:"Transkript suchen",search_transcript_placeholder:"Transkript suchen...",number_of_results:"{number} Ergebnis(e)",clear:"L\xF6schen",save:"Speichern",about:"\xDCber",search:"Suche",advanced_options:"Erweiterte Optionen",copyright_notice:"Urheberrechte \xA9 Einzelne mitwirkende, {date_range}",content_license_prefix:"Inhalt verf\xFCgbar unter a ",content_license_link:"https://creativecommons.org/licenses/by/4.0/deed.en",content_license_link_text:"Creative Commons Namensnennung 4.0 International License",tools_license_prefix:"Council Data Project werkzeuge sind lizenziert unter ",styled_using_prefix:"Gestylt mit ",artwork_provided_by_prefix:"Kunstwerk zur Verf\xFCgung gestellt von ",approve:"Genehmigen",reject:"Ablehnen",rejected:"Abgelehnt",abstain:"Verzichten",adopted:"Angenommen",in_progress:"In Bearbeitung",example_prefix:"Beispiel:",search_topic_placeholder:"Thema suchen...",search_city_council:"Stadtrat suchen",events:"Veranstaltungen",links:"Links",people:"Menschen",council_data_project:"Council Data Project",transcript:"Transkript",agenda:"Agenda",session:"Sitzung",passed:"Passed",failed:"Failed"},Ir={number_approved:"{number} Approved",number_rejected:"{number} Rejected",number_abstained:"{number} Abstained",meeting_votes_caption:"Click each row to see how council members voted",legislation:"Legislation",council_decision:"Council Decision",votes:"Votes",meeting:"Meeting",persons_vote:"{name}'s Vote",en:"English",es:"Espa\xF1ol",de:"Deutsche",keywords:"Keywords",select_language:"Select Language",same:"same",committee:"Committee",chair:"Chair",tenure:"Tenure",bills_sponsored:"bill(s) sponsored",see_documents:"See Documents",jump_to_sentence_video:"Jump to sentence in video",jump_to_sentence_transcript:"Jump to sentence in transcript",search_transcript:"Search transcript",search_transcript_placeholder:"Search transcript...",number_of_results:"{number} result(s)",clear:"Clear",save:"Save",about:"About",search:"Search",advanced_options:"Advanced Options",copyright_notice:"Copyright \xA9 Individual contributors, {date_range}.",content_license_prefix:"Content available under a ",content_license_link:"https://creativecommons.org/licenses/by/4.0/",content_license_link_text:"Creative Commons Attribution 4.0 International License",tools_license_prefix:"Council Data Project tools are licensed under ",styled_using_prefix:"Styled using ",artwork_provided_by_prefix:"Artwork provided by ",approve:"Approve",reject:"Reject",rejected:"Rejected",abstain:"Abstain",adopted:"Adopted",in_progress:"In Progress",example_prefix:"Example: ",search_topic_placeholder:"Search for a topic...",search_city_council:"Search City Council",events:"Events",links:"Links",people:"People",council_data_project:"Council Data Project",transcript:"Transcript",agenda:"Agenda",session:"Session",passed:"Passed",failed:"Failed"},Rr={number_approved:"{number} Aprobado",number_rejected:"{number} Rechazado",number_abstained:"{number} se Abstuvo",meeting_votes_caption:"Haga clic en cada fila para ver c\xF3mo votaron los miembros del consejo",legislation:"Legislaci\xF3n",council_decision:"Decisi\xF3n del Consejo",votes:"Votos",meeting:"Cita",persons_vote:"Voto de {name}",en:"English",es:"Espa\xF1ol",de:"Deutsche",keywords:"Palabras clave",select_language:"Seleccione el Idioma",same:"Mismo",committee:"Comit\xE9",chair:"presidente",tenure:"Tenencia",bills_sponsored:"factura (s) patrocinada",see_documents:"Ver Documentos",jump_to_sentence_video:"Saltar a la oraci\xF3n en el video",jump_to_sentence_transcript:"Saltar a la oraci\xF3n en la transcripci\xF3n",search_transcript:"Buscar transcripci\xF3n",search_transcript_placeholder:"Buscar transcripci\xF3n ...",number_of_results:"{number} resultado (s)",clear:"Despejar",save:"Ahorrar",about:"Acerca de",search:"Buscar",advanced_options:"Opciones Avanzadas",copyright_notice:"Derechos de autor \xA9 Contribuyentes individuales, {date_range}.",content_license_prefix:"Contenido disponible bajo un ",content_license_link:"https://creativecommons.org/licenses/by/4.0/deed.es",content_license_link_text:"Creative Commons Atribuci\xF3n 4.0 Internacional License",tools_license_prefix:"Council Data Project las herramientas tienen licencia bajo ",styled_using_prefix:"Dise\xF1ado usando ",artwork_provided_by_prefix:"Obra proporcionada por ",approve:"Aprobar",reject:"Rechazar",rejected:"Rechazado",abstain:"Abstenerse",adopted:"Adoptado",in_progress:"En curso",example_prefix:"Ejemplo:",search_topic_placeholder:"Buscar un tema ...",search_city_council:"Buscar Ayuntamiento",events:"Eventos",links:"Enlaces",people:"Gente",council_data_project:"Council Data Project",transcript:"Transcripci\xF3n",agenda:"Agenda",session:"Sesi\xF3n",passed:"Passed",failed:"Failed"},b=new sr({en:Ir,de:kr,es:Rr}),$={smallMobile:"320px",largeMobile:"414px",tablet:"768px",desktop:"1224px"},Mr=S.div({float:"left",marginRight:"48px"}),$r=S.button({display:"block",[`@media (min-width:${$.tablet})`]:{display:"none"}}),zr=S.div(t=>({display:t.isVisible?"block":"none",[`@media (min-width:${$.tablet})`]:{display:"block"}})),Tr=({municipalityName:t})=>{const[e,n]=h.exports.useState(!1);return r("header",{children:r("div",{className:"mzp-c-navigation",children:r("div",{className:"mzp-c-navigation-l-content",children:f("div",{className:"mzp-c-navigation-container",children:[r($r,{className:"mzp-c-navigation-menu-button","aria-controls":"patterns.organisms.navigation.navigation",onClick:()=>n(s=>!s),children:"Menu"}),r(Mr,{children:r("a",{href:"https://councildataproject.org",className:"cdp-icon-black-bg-transparent-size-256",title:b.council_data_project,style:{maxHeight:"64px",maxWidth:"64px"},children:b.council_data_project})}),r(zr,{isVisible:e,className:"mzp-c-navigation-items",id:"patterns.organisms.navigation.navigation",children:r("div",{className:"mzp-c-navigation-menu",children:r("nav",{className:"mzp-c-menu mzp-is-basic",children:f("ul",{className:"mzp-c-menu-category-list",children:[r("li",{className:"mzp-c-menu-category",children:r(W,{to:"/",className:"mzp-c-menu-title",children:t})}),r("li",{className:"mzp-c-menu-category",children:r(W,{to:"/events",className:"mzp-c-menu-title",children:b.events})}),r("li",{className:"mzp-c-menu-category",children:r(W,{to:"/people",className:"mzp-c-menu-title",children:b.people})})]})})})})]})})})})};function Nr(t){return f("section",{className:"mzp-c-footer-section",children:[r("h5",{className:"mzp-c-footer-heading",children:t.footerLinksSectionName}),r("ul",{children:t.links.map(e=>r("li",{children:r("a",{href:e.url,children:e.label})},e.label))})]})}const Fr=({footerLinksSections:t})=>r("footer",{className:"mzp-c-footer",children:f("div",{className:"mzp-l-content",children:[r("nav",{className:"mzp-c-footer-primary","aria-label":"footer",children:f("div",{className:"mzp-c-footer-sections",children:[f("section",{className:"mzp-c-footer-section",children:[r("h5",{className:"mzp-c-footer-heading",children:b.about}),f("ul",{children:[r("li",{children:r("a",{href:"https://councildataproject.github.io/",children:"CouncilDataProject"})}),r("li",{children:r("a",{href:"https://github.com/CouncilDataProject",children:"GitHub"})})]})]}),t.map(e=>Nr(e))]})}),r("nav",{className:"mzp-c-footer-secondary",children:f("div",{className:"mzp-c-footer-legal mzp-c-footer-license",children:[r("p",{children:b.copyright_notice.replace("{date_range}","2017-2021")}),f("p",{children:[b.content_license_prefix,r("a",{rel:"noopener noreferrer license external",href:b.content_license_link,target:"_blank",children:b.content_license_link_text}),".",r("br",{}),b.tools_license_prefix,r("a",{rel:"noopener noreferrer license external",href:"https://github.com/CouncilDataProject/cookiecutter-cdp-deployment/blob/main/LICENSE",target:"_blank",children:"MIT License"}),"."]}),f("p",{children:[b.styled_using_prefix,r("a",{rel:"noopener noreferrer external",href:"https://protocol.mozilla.org/",target:"_blank",children:"Mozilla Protocol"}),".",r("br",{}),b.artwork_provided_by_prefix,r("a",{rel:"noopener noreferrer external",href:"https://undraw.co/",target:"_blank",children:"unDraw"}),"."]})]})})]})});var q;(function(t){t.EVENT="events",t.LEGISLATION="legislations"})(q||(q={}));const it="FILTER_CLEAR",ot="FILTER_UPDATE",Pr=()=>(t,e)=>{switch(e.type){case ot:return T(M({},t),{[e.payload.keyName]:e.payload.dataValue});case it:const n=M({},t);return Object.keys(n).forEach(s=>n[s]=e.payload.dataValue),n;default:return t}},at=(t,e)=>{const n=Object.values(t).filter(i=>i).length;return n?`${e} : ${n}`:e},Ae=t=>Object.keys(t).filter(e=>t[e]===!0);var Ue=S.form({marginBottom:0,"& .mzp-c-field-set":{padding:0},"& .mzp-c-choices":{paddingBottom:0}});const Lr=(t,e)=>t.toLowerCase().indexOf(e.toLowerCase())!==-1,Br=S.label({"&::after":{boxSizing:"unset"}}),Vr=({name:t,state:e,update:n,options:s,optionQuery:i,setOptionQuery:o})=>{const a=l=>{const m=l.currentTarget.name,p=l.currentTarget.checked;n(m,p)},c=l=>{const m=l.currentTarget.value;o&&o(m)},d=h.exports.useMemo(()=>{let l=[...s];if(s.length>5&&o){for(const m of s)m.disabled=!Lr(m.label,i||"");l=[...s.filter(m=>!m.disabled),...s.filter(m=>m.disabled)]}return l},[s,i,o]);return f(Ue,{className:"mzp-c-form",children:[s.length>5&&o&&f("div",{className:"mzp-c-field mzp-l-stretch",children:[r("label",{className:"mzp-c-field-label",htmlFor:"form-input-control-search-filter",children:`Search ${t} Options`}),r("input",{className:"mzp-c-field-control",type:"text",id:"form-input-control-search-filter",value:i,onChange:c})]}),r("fieldset",{className:"mzp-c-field-set",children:r("div",{className:"mzp-c-choices",children:d.map(l=>f("div",{className:"mzp-c-choice",children:[r("input",{className:"mzp-c-choice-control",type:"checkbox",name:l.name,id:`form-checkbox-control-${l.name}`,checked:e[l.name]||!1,disabled:l.disabled,onChange:a}),r(Br,{className:"mzp-c-choice-label",htmlFor:`form-checkbox-control-${l.name}`,children:l.label})]},l.name))})})]})};function ce(t){const{name:e,initialState:n,defaultDataValue:s,textRepFunction:i,isRequired:o,limit:a}=t,c=Pr(),[d,l]=h.exports.useReducer(c,n),[m,p]=h.exports.useState(!1),g=()=>{l({type:it,payload:{dataValue:s}})},v=(x,R)=>{l({type:ot,payload:{keyName:x,dataValue:R}})},y=()=>i(d,e),C=()=>Object.values(d).some(x=>x!==s);return{name:e,state:d,clear:g,update:v,popupIsOpen:m,setPopupIsOpen:p,getTextRep:y,isActive:C,isSameState:x=>{if(!Object.entries(x).length)return!C();const R=Object.keys(d);for(const I of R)if(d[I]&&!x.hasOwnProperty(I)||d[I]!==x[I]&&x.hasOwnProperty(I))return!1;return!0},hasRequiredError:()=>o?!C():!1,hasLimitError:()=>a!==void 0?Ae(d).length>a:!1,limit:a}}const ct=["minimum wage","police budget","rent control","municipal broadband","police accountability","homelessness response","municipal broadband, digital equity","sodo stadium","35 ave bike lane","capitol hill megablock"],Ar=`
  display: grid;
  column-gap: 8px;
  row-gap: 4px;
  /**One column template*/
  grid-template-columns: 1fr;
  justify-content: start;
`,Ur=S.div`
  ${Ar}
  @media (min-width: ${$.tablet}) {
    /**Two columns template, with the first column taking up any free space*/
    grid-template-columns: 1fr auto;
  }
`,qr=S.input`
  margin-bottom: 0px !important;
`,Gr=S.p`
  padding-top: 0px !important;
  font-size: 0.775rem !important;
  @media (min-width: ${$.tablet}) {
    /**Make the example topic appear after the search button*/
    order: 1;
  }
`,Hr=[{name:q.EVENT,label:"Events",disabled:!1},{name:q.LEGISLATION,label:"Legislations",disabled:!1}],Dr={[q.EVENT]:!0,[q.LEGISLATION]:!0},Qr=(t,e)=>{const n=Object.keys(t).filter(i=>t[i]);let s=e;return n.length===Object.keys(t).length?s+="(s): All":n.length>0&&(s+=`(s): ${n.map(o=>{var c;const a=Hr.find(d=>d.name===o);return(c=a==null?void 0:a.label)!=null?c:""}).join(", ")}`),s},Or=ct[Math.floor(Math.random()*ct.length)],Wr=()=>{const[t,e]=h.exports.useState(""),n=Ke(),s=ce({name:"Search Type",initialState:Dr,defaultDataValue:!1,textRepFunction:Qr,isRequired:!0}),i=a=>{a.preventDefault();const c=`?q=${t.trim().replace(/\s+/g,"+")}`;n.push({pathname:`/${q.EVENT}/search`,search:c,state:{query:t.trim(),committees:{},dateRange:{}}})},o=a=>e(a.target.value);return r("div",{children:r("form",{className:"mzp-c-form",role:"search",onSubmit:i,children:f(Ur,{children:[r(qr,{type:"search",placeholder:b.search_topic_placeholder,required:!0,"aria-required":!0,disabled:!s.isActive(),value:t,onChange:o}),f(Gr,{className:"mzp-c-field-info",children:[b.example_prefix,Or]}),r("button",{className:"mzp-c-button mzp-t-product",type:"submit",disabled:!s.isActive(),children:b.search})]})})})},Jr=S.div({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",flex:1,"& > *":{width:"100%"},[`@media (min-width:${$.tablet})`]:{"& > *":{width:"75%"}}}),Zr=()=>(me(b.council_data_project),f(Jr,{children:[r("h1",{className:"mzp-u-title-xs",children:b.search_city_council}),r(Wr,{})]}));class qe{constructor(e,n){this.data=e,this.error=n}}class Xr{constructor(e,n){this.data=e,this.error=n}}class Ge extends Error{constructor(e){super(`No documents found from querying ${e}`);this.name="NoDocumentsError",Object.setPrototypeOf(this,new.target.prototype)}}var u;(function(t){t.Body="body",t.Event="event",t.EventMinutesItem="event_minutes_item",t.EventMinutesItemFile="event_minutes_item_file",t.File="file",t.IndexedEventGram="indexed_event_gram",t.Matter="matter",t.MatterFile="matter_file",t.MatterSponsor="matter_sponsor",t.MatterStatus="matter_status",t.MinutesItem="minutes_item",t.Person="person",t.Role="role",t.Seat="seat",t.Session="session",t.Transcript="transcript",t.TranscriptJSON="transcript_json",t.Vote="vote"})(u||(u={}));var w;(function(t){t.EventBodyRef="body_ref",t.EventHoverThumbnailRef="hover_thumbnail_ref",t.EventStaticThumbnailRef="static_thumbnail_ref",t.EventMinutesItemEventRef="event_ref",t.EventMinutesItemMinutesItemRef="minutes_item_ref",t.EventMinutesItemFileEventMinutesItemRef="event_minutes_item_ref",t.IndexedEventGramEventRef="event_ref",t.MatterFileMatterRef="matter_ref",t.MatterStatusEventMinutesItemRef="event_minutes_item_ref",t.MatterStatusMatterRef="matter_ref",t.MatterSponsorMatterRef="matter_ref",t.MatterSponsorPersonRef="person_ref",t.MinutesItemMatterRef="matter_ref",t.PersonPictureRef="picture_ref",t.RoleBodyRef="body_ref",t.RolePersonRef="person_ref",t.RoleSeatRef="seat_ref",t.SeatImageRef="image_ref",t.SessionEventRef="event_ref",t.TranscriptFileRef="file_ref",t.TranscriptSessionRef="session_ref",t.VoteEventMinutesItemRef="event_minutes_item_ref",t.VoteEventRef="event_ref",t.VoteMatterRef="matter_ref",t.VotePersonRef="person_ref"})(w||(w={}));function lt(t){switch(t){case w.EventBodyRef:return u.Body;case w.EventHoverThumbnailRef:return u.File;case w.EventStaticThumbnailRef:return u.File;case w.EventMinutesItemEventRef:return u.Event;case w.EventMinutesItemMinutesItemRef:return u.MinutesItem;case w.EventMinutesItemFileEventMinutesItemRef:return u.EventMinutesItem;case w.IndexedEventGramEventRef:return u.Event;case w.MatterFileMatterRef:return u.Matter;case w.MatterStatusEventMinutesItemRef:return u.EventMinutesItem;case w.MatterStatusMatterRef:return u.Matter;case w.MatterSponsorMatterRef:return u.Matter;case w.MatterSponsorPersonRef:return u.Person;case w.MinutesItemMatterRef:return u.Matter;case w.PersonPictureRef:return u.File;case w.RoleBodyRef:return u.Body;case w.RolePersonRef:return u.Person;case w.RoleSeatRef:return u.Seat;case w.SeatImageRef:return u.File;case w.SessionEventRef:return u.Event;case w.TranscriptFileRef:return u.File;case w.TranscriptSessionRef:return u.Session;case w.VoteEventMinutesItemRef:return u.MinutesItem;case w.VoteEventRef:return u.Event;case w.VoteMatterRef:return u.Matter;case w.VotePersonRef:return u.Person;default:return}}class L{constructor(e,n,s){this.collectionName=e,this.refName=n,this.cascade=s}}class H{constructor(e){this.toPopulate=e}}function Z(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(String(t))}class F{constructor(e,n){const s=ir(e);or(s,n),F.db=ar()}static getInstance(e,n){return F.instance||(F.instance=new F(e,n)),F.instance}static getDb(){return F.db}collateDocumentData(e,n,s){return Promise.all(e).then(i=>(i.forEach((o,a)=>{s.data&&(s.data[n[a]]=o.data)}),Promise.resolve(s))).catch(i=>(s.error=i,Promise.resolve(s)))}async getDocument(e,n,s){const i=O(F.db,n,e),o=new qe;return cr(i).then(a=>{if(!a.exists())return Promise.reject(new Error(`Document ${e} does not exist in Collection ${n}.`));const c=a.data();if(!c)return Promise.reject(new Error("No data on docSnap."));if(c.id=a.id,o.data=c,s&&s.toPopulate){const d=[],l=[];return s.toPopulate.filter(m=>c[m.refName]).forEach(m=>{const p=c[m.refName].id,g=lt(m.refName);p&&g&&(d.push(this.getDocument(p,g,m.cascade)),l.push(m.refName))}),this.collateDocumentData(d,l,o)}else return Promise.resolve(o)}).catch(a=>(a.message=`_getDocument_${a.message}`,o.error=a,Promise.resolve(o)))}async getDocuments(e,n,s){const i=lr(F.db,e),o=dr(i,...n),a=new Xr;try{const c=await ur(o);if(c.empty)throw new Ge(e);const d=[];if(c.forEach(l=>{const m=l.data();if(!m)return Promise.reject(new Error("No data on docSnap."));m.id=l.id,d.push(m)}),s&&s.toPopulate){const l=[];for(const g of d){const v=[],y=[],C=new qe;C.data=g,s.toPopulate.filter(_=>g[_.refName]).forEach(_=>{const k=g[_.refName].id,E=lt(_.refName);k&&E&&(v.push(this.getDocument(k,E,_.cascade)),y.push(_.refName))}),l.push(this.collateDocumentData(v,y,C))}const p=(await Promise.all(l)).map(({data:g})=>g);return a.data=p,Promise.resolve(a)}else return a.data=d,Promise.resolve(a)}catch(c){return a.error=Z(c),Promise.resolve(a)}}async downloadJson(e){const n=new qe;try{const s=await this.getDownloadUrl(e),i=await fetch(s).then(o=>o.json());if(!i)throw new Error(`No JSON found for uri: ${e}`);n.data=i}catch(s){const i=Z(s);n.error=i}finally{return Promise.resolve(n)}}async getDownloadUrl(e){const n=mr(),s=pr(n,e);return await hr(s)}}function Yr(t){switch(t){case u.Body:return["id","is_active","start_datetime","name"];case u.Event:return["id","body_ref","event_datetime"];case u.EventMinutesItem:return["id","event_ref","index","minutes_item_ref"];case u.EventMinutesItemFile:return["id","event_minutes_item_ref","name","uri"];case u.File:return["id","name","uri"];case u.IndexedEventGram:return["id","context_span","datetime_weighted_value","event_ref","stemmed_gram","unstemmed_gram","value"];case u.Matter:return["id","matter_type","name","title"];case u.MatterFile:return["id","matter_ref","name","uri"];case u.MatterSponsor:return["id","matter_ref","person_ref"];case u.MatterStatus:return["id","matter_ref","status","update_datetime"];case u.MinutesItem:return["id","name"];case u.Person:return["id","is_active","name","router_string"];case u.Role:return["id","start_datetime","title","person_ref","seat_ref"];case u.Seat:return["id","name"];case u.Session:return["id","event_ref","session_datetime","session_index","video_uri"];case u.Transcript:return["id","confidence","created","generator","file_ref","session_ref"];case u.TranscriptJSON:return["confidence","generator","created_datetime","sentences"];case u.Vote:return["id","event_minutes_item_ref","event_ref","matter_ref","person_ref","decision"]}}function dt(t,e){try{const s=Yr(e).filter(i=>!t.hasOwnProperty(i));if(s.length>0)throw new Error(`Missing properties: ${JSON.stringify(s)}`);return}catch(n){return n instanceof Error?(n.message=`validateResponseData_${n.message}`,n):new Error("validateResponseData_somehow threw a incorrectly-typed error")}}class D{constructor(e,n){this.networkService=F.getInstance(n.options,n.settings),this.modelName=e;const s=e.split("_").map(i=>i[0].toUpperCase()+i.slice(1)).join("");this.serviceName=`${s}Service`}async createModel(e,n,s){try{const{data:i,error:o}=await e;if(o)throw o;if(!i)throw new Error(`No ${this.modelName} found.`);const a=dt(i,this.modelName);if(a)throw a;return Promise.resolve(new n(i))}catch(i){const o=Z(i);return o.message=`${this.serviceName}_${s}_${o.message}`,Promise.reject(o)}}async createModels(e,n,s){try{const{data:i,error:o}=await e;if(o){if(o instanceof Ge)return Promise.resolve([]);throw o}if(!i||i.length===0)throw new Error(`No ${this.modelName}s found.`);const a=i.map(c=>{const d=dt(c,this.modelName);if(d)throw d;return new n(c)});return Promise.resolve(a)}catch(i){const o=Z(i);return o.message=`${this.serviceName}_${s}_${o.message}`,Promise.reject(o)}}}var B;(function(t){t.lt="<",t.lteq="<=",t.eq="==",t.gt=">",t.gteq=">=",t.not_eq="!=",t.array_contains="array-contains",t.array_contains_any="array-contains-any",t.in="in",t.not_in="not-in"})(B||(B={}));var G;(function(t){t.asc="asc",t.desc="desc"})(G||(G={}));const He=10;function j(t){return new Date(t.seconds*1e3)}class ze{constructor(e){this.id=e.id,this.is_active=e.is_active,this.start_datetime=j(e.start_datetime),this.name=e.name,e.description&&(this.description=e.description),e.end_datetime&&(this.end_datetime=j(e.end_datetime)),e.external_source_id&&(this.external_source_id=e.external_source_id)}}class ut extends D{constructor(e){super(u.Body,e)}async getBodiesByName(e){const n=this.networkService.getDocuments(u.Body,[V("name",B.eq,e)]);return this.createModels(n,ze,`getBodyByName(${e})`)}async getAllBodies(){const e=this.networkService.getDocuments(u.Body,[J("name")]);return this.createModels(e,ze,"getAllBodies()")}}const be=({isLoading:t,children:e,error:n})=>t?r(Ie,{active:!0,size:"massive"}):n?r("span",{children:n.toString()}):r(ge,{children:e});var X;(function(t){t.FETCH_INIT="FETCH_INIT",t.FETCH_SUCCESS="FETCH_SUCCESS",t.FETCH_FAILURE="FETCH_FAILURE",t.FETCH="FETCH"})(X||(X={}));const Kr=()=>(t,e)=>{switch(e.type){case X.FETCH_INIT:return T(M({},t),{isLoading:!0,error:null});case X.FETCH_SUCCESS:return T(M({},t),{isLoading:!1,data:e.payload,hasFetchRequest:!1});case X.FETCH_FAILURE:return T(M({},t),{isLoading:!1,error:e.payload,hasFetchRequest:!1});case X.FETCH:return T(M({},t),{hasFetchRequest:!0});default:return t}};function ee(t,e){const n=Kr(),[s,i]=h.exports.useReducer(n,t);return h.exports.useEffect(()=>{let o=!1;const a=async()=>{try{i({type:X.FETCH_INIT});const c=await e();o||i({type:X.FETCH_SUCCESS,payload:c})}catch(c){if(!o){const d=Z(c);i({type:X.FETCH_FAILURE,payload:d})}}};return s.hasFetchRequest&&a(),()=>{o=!0}},[s.hasFetchRequest,e]),{state:s,dispatch:i}}var Y;(function(t){t.FAILURE="FAILURE",t.FETCH_CARDS="FETCH_CARDS",t.FETCH_CARDS_SUCCESS="FETCH_CARDS_SUCCESSS",t.SHOW_MORE_CARDS="SHOW_MORE_CARDS"})(Y||(Y={}));const jr=()=>(t,e)=>{switch(e.type){case Y.FAILURE:return T(M({},t),{error:e.payload,fetchCards:!1});case Y.FETCH_CARDS:return T(M({},t),{error:null,fetchCards:!0});case Y.FETCH_CARDS_SUCCESS:{const n=Math.min(t.batchSize,e.payload.length);return T(M({},t),{cards:e.payload,visibleCount:n,fetchCards:!1})}case Y.SHOW_MORE_CARDS:{const n=Math.min(t.batchSize+t.visibleCount,t.cards.length);return T(M({},t),{visibleCount:n})}default:return t}};function en(t,e){const n=jr(),[s,i]=h.exports.useReducer(n,t);return h.exports.useEffect(()=>{let o=!1;const a=async()=>{try{const c=await e();o||i({type:Y.FETCH_CARDS_SUCCESS,payload:c})}catch(c){if(!o){const d=Z(c);i({type:Y.FAILURE,payload:d})}}};return s.fetchCards&&a(),()=>{o=!0}},[s.fetchCards,e,i]),[s,i]}De(2);De(3);function De(t){if(typeof t!="number"||Number.isNaN(t)||t<1||t===Number.POSITIVE_INFINITY)throw new Error("`"+t+"` is not a valid argument for `n-gram`");return e;function e(n){var s=[],i,o;if(n==null||(o=n.slice?n:String(n),i=o.length-t+1,i<1))return s;for(;i--;)s[i]=o.slice(i,i+t);return s}}class pe{constructor(e){this.id=e.id,this.uri=e.uri,this.name=e.name,e.description&&(this.description=e.description),e.media_type&&(this.media_type=e.media_type)}}class le{constructor(e){this.id=e.id,this.event_datetime=j(e.event_datetime),this.body_ref=e.body_ref.id,e.agenda_uri&&(this.agenda_uri=e.agenda_uri),e.minutes_uri&&(this.minutes_uri=e.minutes_uri),typeof e.body_ref=="object"&&!(e.body_ref instanceof N)&&(this.body=new ze(e.body_ref)),e.external_source_id&&(this.external_source_id=e.external_source_id),e.hover_thumbnail_ref&&(e.hover_thumbnail_ref instanceof N?this.hover_thumbnail_ref=e.hover_thumbnail_ref.id:typeof e.hover_thumbnail_ref=="object"&&(this.hover_thumbnail=new pe(e.hover_thumbnail_ref))),e.static_thumbnail_ref&&(e.static_thumbnail_ref instanceof N?this.static_thumbnail_ref=e.static_thumbnail_ref.id:typeof e.static_thumbnail_ref=="object"&&(this.static_thumbnail=new pe(e.static_thumbnail_ref)))}}class mt{constructor(e){this.id=e.id,this.context_span=e.context_span,this.datetime_weighted_value=e.datetime_weighted_value,this.event_ref=e.event_ref.id,this.stemmed_gram=e.stemmed_gram,this.unstemmed_gram=e.unstemmed_gram,this.value=e.value,typeof e.event_ref=="object"&&!(e.event_ref instanceof N)&&(this.event=new le(e.event_ref))}}class pt extends D{constructor(e){super(u.IndexedEventGram,e)}async getMatchingGrams(e){const n=this.networkService.getDocuments(u.IndexedEventGram,[V("stemmed_gram",B.eq,e)]);return this.createModels(n,mt,`getMatchingGrams(${e})`)}async getKeyGramsForEvent(e){const n=this.networkService.getDocuments(u.IndexedEventGram,[V("event_ref",B.eq,O(F.getDb(),e)),J("value",G.desc),Le(5)]);return this.createModels(n,mt,`getKeyGramsForEvent(${e})`)}}class Qe extends D{constructor(e){super(u.Event,e);this.indexedEventGramService=new pt(e)}async getEventById(e){const n=this.networkService.getDocument(e,u.Event,new H([new L(u.Body,w.EventBodyRef)]));return this.createModel(n,le,`getEventById(${e})`)}async getFullEventById(e){const n=this.networkService.getDocument(e,u.Event,new H([new L(u.Body,w.EventBodyRef),new L(u.File,w.EventStaticThumbnailRef),new L(u.File,w.EventHoverThumbnailRef)]));return this.createModel(n,le,`getFullEventById(${e})`)}async getEvents(e,n,s,i,o){if(n.length>10)return Promise.reject(new Error(`Number of bodies exceeded ${He}.`));const a=[];if(n.length>0){const d=n.map(l=>O(F.getDb(),u.Body,l));a.push(V(w.EventBodyRef,B.in,d))}if(s.start){const d=Be.fromDate(s.start);a.push(V("event_datetime",B.gteq,d))}if(s.end){const d=new Date(s.end);d.setDate(d.getDate()+1);const l=Be.fromDate(d);a.push(V("event_datetime",B.lteq,l))}if(a.push(J(i.by,i.order)),o){const d=Be.fromDate(o);a.push(fr(d))}a.push(Le(e));const c=this.networkService.getDocuments(u.Event,a,new H([new L(u.Body,w.EventBodyRef),new L(u.File,w.EventStaticThumbnailRef),new L(u.File,w.EventHoverThumbnailRef)]));return this.createModels(c,le,`getEvents([${n}], ${JSON.stringify(s)}, ${JSON.stringify(i)}, ${o==null?void 0:o.toISOString}})`)}async getRenderableEvent(e){try{const s=(await this.indexedEventGramService.getKeyGramsForEvent(`${u.Event}/${e.id}`)).reduce((a,c)=>(c.unstemmed_gram!==void 0&&a.push(c.unstemmed_gram),a),[]),[i,o]=await Promise.all([e.static_thumbnail,e.hover_thumbnail].map(a=>a?this.networkService.getDownloadUrl(a.uri):Promise.resolve("")));return Promise.resolve(T(M({},e),{keyGrams:s,staticThumbnailURL:i,hoverThumbnailURL:o}))}catch(n){const s=Z(n);return s.message=`eventService_getRenderableEvent(${JSON.stringify(e)})_${s.message}`,Promise.reject(s)}}}const we=t=>{let e=t.replace(/[\t\n]+/g," ");return e=e.replace(/[\-\-]/g," "),e=e.replace(/['!"#$%&\\'()\*+,\-\.\/:;<=>?@\[\\\]\^_`{|}~']/g,""),e=e.replace(/\s{2,}/g," "),e.trim()};class tn{constructor(e,n,s,i,o,a){this.eventRef=`${u.Event}/${e}`,this.pureRelevance=n,this.datetimeWeightedRelevance=s,this.containedGrams=i,this.selectedGram=o,this.selectedContextSpan=a}}class rn{constructor(e,n,s,i,o,a,c,d,l){this.event=e,this.pureRelevance=n,this.datetimeWeightedRelevance=s,this.containedGrams=i,this.selectedGram=o,this.selectedContextSpan=a,this.keyGrams=c,this.staticThumbnailURL=d,this.hoverThumbnailURL=l}}class nn{constructor(e){this.networkService=F.getInstance(e.options,e.settings),this.eventService=new Qe(e),this.indexedEventGramService=new pt(e),this.serviceName="EventSearchService"}cleanText(e){const n=we(e);return _e(n.split(" "))}getStemmedGrams(e){const n=this.cleanText(e),s=[];return Array.from([1,2,3]).forEach(i=>{De(i)(n).forEach(a=>{s.push(a.map(c=>Re(c)).join(" ").toLowerCase())})}),s}async searchEvents(e){const s=this.getStemmedGrams(e).map(a=>this.indexedEventGramService.getMatchingGrams(a)),i=new Map,o=[];try{return await Promise.allSettled(s).then(a=>{a.forEach(c=>{if(c.status==="fulfilled")c.value.forEach(d=>{if(d.event_ref!==void 0){const l=i.get(d.event_ref);l===void 0?i.set(d.event_ref,[d]):l.push(d)}});else if(!(c.reason instanceof Ge))throw c.reason});for(const[c,d]of i){const l=ye.exports.maxBy(d,"value");let m="",p="";l&&(m=(l==null?void 0:l.context_span)||"",p=(l==null?void 0:l.unstemmed_gram)||"");const g=d.reduce((v,y)=>(y.unstemmed_gram!==void 0&&v.push(y.unstemmed_gram),v),[]);o.push(new tn(c,ye.exports.sumBy(d,"value"),ye.exports.sumBy(d,"datetime_weighted_value"),g,p,m))}}),Promise.resolve(o)}catch(a){const c=Z(a);return c.message=`${this.serviceName}_searchEvents(${e})_${c.message}`,Promise.reject(c)}}async getRenderableEvent(e){const n=e.eventRef.split("/")[1],s=this.eventService.getFullEventById(n),i=this.indexedEventGramService.getKeyGramsForEvent(e.eventRef);try{const[o,a]=await Promise.all([s,i]),c=a.reduce((m,p)=>(p.unstemmed_gram!==void 0&&m.push(p.unstemmed_gram),m),[]),[d,l]=await Promise.all([o.static_thumbnail,o.hover_thumbnail].map(m=>m?this.networkService.getDownloadUrl(m.uri):Promise.resolve("")));return Promise.resolve(new rn(o,e.pureRelevance,e.datetimeWeightedRelevance,e.containedGrams,e.selectedGram,e.selectedContextSpan,c,d,l))}catch(o){const a=Z(o);return a.message=`${this.serviceName}_getRenderableEvent(${e.eventRef})_${a.message}`,Promise.reject(a)}}}const ne={lightgrey:"#DDDDDD",grey:"#595959",black:"#111111",white:"#FFFFFF",basicGrey:"#ececec",dark_blue:"#00458b"},Te=" \u2022 ",ht={COLORS:{ODD_CELL:ne.white,EVEN_CELL:ne.lightgrey,ACTIVE_UNDERLINE:ne.dark_blue}},sn=S.section({"& img:first-of-type, &:hover img:last-of-type":{visibility:"visible"},"& img:last-of-type, &:hover img:first-of-type":{visibility:"hidden"},marginBottom:0}),ft=({staticImgSrc:t,hoverImgSrc:e,imgAlt:n,meetingDate:s,committee:i,tags:o,excerpt:a,gram:c,query:d})=>{const l=o.map(p=>p.toLowerCase()).join(Te),m=h.exports.useMemo(()=>{const p=we(d||""),g=_e(p.split(" "));return c&&c.length>0&&g.push(c),g.length===0?[]:[new RegExp(`\\b(${g.join("|")})`,"g")]},[d,c]);return r(sn,{className:"mzp-c-card mzp-c-card-medium mzp-has-aspect-16-9",children:f("div",{className:"mzp-c-card-block-link",children:[f("div",{className:"mzp-c-card-media-wrapper",children:[r("img",{className:"mzp-c-card-image",src:t,alt:n}),r("img",{className:"mzp-c-card-image",src:e,alt:n})]}),f("div",{className:"mzp-c-card-content",children:[r("div",{className:"mzp-c-card-tag",children:b.committee}),r("h2",{className:"mzp-c-card-title",children:s}),r("p",{className:"mzp-c-card-desc",children:i}),a&&r("p",{className:"mzp-c-card-desc",style:{fontStyle:"italic",marginTop:"1rem"},children:r(je,{caseSensitive:!1,searchWords:m,textToHighlight:`"${a}"`})}),r("p",{className:"mzp-c-card-meta",children:b.keywords}),r("p",{className:"mzp-c-card-desc",children:l})]})]})})},on=S.div({display:"flex",flexDirection:"column",gap:4,[`@media (min-width:${$.tablet})`]:{flexDirection:"row",flexWrap:"wrap","& > div:last-of-type:not(:first-of-type), & > button:last-of-type":{marginLeft:"auto"}}}),vt=()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),gt=S.button({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%","& > svg":{marginLeft:24,width:16,height:16}});gt.displayName="TriggerButton";const _t=S(Me)({maxWidth:"100% !important",boxShadow:"none !important",border:"2px solid #9595a2 !important"});_t.displayName="StyledPopup";const yt=S(Me.Content)({flexGrow:1,overflowY:"auto",paddingLeft:"10px",paddingRight:"10px"});yt.displayName="ContentContainer";const bt=S.div({maxHeight:"45vh",display:"flex",flexDirection:"column"});bt.displayName="PopupContainer";const wt=S.div({display:"flex",justifyContent:"space-between",padding:".833em 0 0",minWidth:"256px"});wt.displayName="ButtonContainer";const Oe=({name:t,clear:e,getTextRep:n,isActive:s,popupIsOpen:i,setPopupIsOpen:o,handlePopupClose:a,closeOnChange:c,children:d,hasRequiredError:l,hasLimitError:m,limit:p})=>{const g=h.exports.useRef(null),v=ye.exports.some([l,m]),y=h.exports.useMemo(()=>{const x=[];return l&&x.push(`Please select at least one ${t.toLowerCase()}.`),m&&x.push(`Please select only ${p} or fewer ${t.toLowerCase()}s.`),x},[l,m,t,p]),C=()=>o(!1),_=()=>{o(x=>!x)},k=()=>{o(!1),!v&&a&&a()},E=()=>{e()};return f(h.exports.Fragment,{children:[r(_t,{basic:!0,flowing:!0,context:g.current||void 0,on:"click",open:i,onClose:C,pinned:!0,offset:[0,-5],position:"bottom left",positionFixed:!0,trigger:f(gt,{className:"mzp-c-button mzp-t-lg mzp-t-neutral",onClick:_,children:[n(),r(vt,{})]}),children:f(bt,{children:[r(yt,{children:d}),v&&r("div",{className:"mzp-c-form-errors",style:{margin:"24px 0"},children:r("ul",{className:"mzp-u-list-styled",children:y.map(x=>r("li",{children:x},x))})}),!c&&f(wt,{children:[r("button",{className:"mzp-c-button mzp-t-md mzp-t-neutral",disabled:!s(),onClick:E,children:b.clear}),r("button",{className:"mzp-c-button mzp-t-md mzp-t-product",disabled:v,onClick:k,children:b.save})]})]})}),r("div",{ref:g})]})},xt=(t,e)=>{const n=et.utc(t.start,"YYYY-MM-DD"),s=et.utc(t.end,"YYYY-MM-DD"),i=n.format("MMM D, YYYY"),o=s.format("MMM D, YYYY");let a;return t.start&&t.end?n.year()===s.year()&&n.month()===s.month()?a=`${i.split(",")[0]} - ${s.date()}, ${s.year()}`:n.year()===s.year()?a=`${i.split(",")[0]} - ${o.split(",")[0]}, ${s.year()}`:a=`${i} - ${o}`:t.start?a=`${i} -`:t.end?a=`- ${o}`:a=e,a},an=({state:t,update:e})=>{const n=s=>{const i=s.currentTarget.name,o=s.currentTarget.value;e(i,o)};return f(Ue,{className:"mzp-c-form",children:[f("div",{className:"mzp-c-field",children:[r("label",{className:"mzp-c-field-label",htmlFor:"form-input-control-start-date",children:"From"}),r("input",{className:"mzp-c-field-control",type:"date",name:"start",id:"form-input-control-start-date",value:t.start,onChange:n})]}),f("div",{className:"mzp-c-field",children:[r("label",{className:"mzp-c-field-label",htmlFor:"form-input-control-end-date",children:"To"}),r("input",{className:"mzp-c-field-control",type:"date",name:"end",id:"form-input-control-end-date",value:t.end,onChange:n})]})]})},cn=({sortOptions:t,state:e,update:n,onPopupClose:s})=>{const i=o=>{const[a,c]=o.currentTarget.value.split("#");if(n("by",a),n("order",c),o.currentTarget.parentNode){const d=o.currentTarget.parentNode.textContent;d&&n("label",d)}s()};return r(Ue,{className:"mzp-c-form",children:r("fieldset",{className:"mzp-c-field-set",children:r("div",{className:"mzp-c-choices",children:t.map(o=>f("div",{className:"mzp-c-choice",children:[r("input",{className:"mzp-c-choice-control",type:"radio",id:`form-checkbox-control-${o.label}`,value:`${o.by}#${o.order}`,checked:e.label===o.label,onChange:i}),r("label",{className:"mzp-c-choice-label",htmlFor:`form-checkbox-control-${o.label}`,children:o.label})]},o.label))})})})},St=(t,e)=>{let n=e;return t.by&&t.order&&t.label&&(n=t.label),n},Ct=({allBodies:t,filters:e,sortOptions:n,handlePopupClose:s})=>{const[i,o,a]=e,[c,d]=h.exports.useState(""),l=()=>t.map(p=>({name:p.id,label:p.name,disabled:!1})),m=()=>{a.setPopupIsOpen(!1),s()};return f(on,{children:[r("div",{children:r(Oe,{name:i.name,clear:i.clear,getTextRep:i.getTextRep,isActive:i.isActive,popupIsOpen:i.popupIsOpen,setPopupIsOpen:i.setPopupIsOpen,handlePopupClose:s,closeOnChange:!1,hasLimitError:i.hasLimitError(),limit:i.limit,children:r(Vr,{name:i.name,state:i.state,update:i.update,options:l(),optionQuery:c,setOptionQuery:d})})}),r("div",{children:r(Oe,{name:o.name,clear:o.clear,getTextRep:o.getTextRep,isActive:o.isActive,popupIsOpen:o.popupIsOpen,setPopupIsOpen:o.setPopupIsOpen,handlePopupClose:s,closeOnChange:!1,children:r(an,{state:o.state,update:o.update})})}),r("div",{children:r(Oe,{name:a.name,clear:a.clear,getTextRep:a.getTextRep,isActive:a.isActive,popupIsOpen:a.popupIsOpen,setPopupIsOpen:a.setPopupIsOpen,handlePopupClose:s,closeOnChange:!0,children:r(cn,{sortOptions:n,state:a.state,update:a.update,onPopupClose:m})})})]})},de={font_size_1:"0.625rem",font_size_2:"0.75rem",font_size_3:"0.8125rem",font_size_4:"0.875rem",font_size_5:"1rem",font_size_6:"1.125rem",font_size_7:"1.25rem",font_size_8:"1.5rem",font_size_9:"1.625rem",font_size_10:"1.75rem"},xe=S.p({fontSize:de.font_size_6}),Et=S.div({display:"flex",flexDirection:"column",gap:32}),kt=({placeholder:t,query:e,setQuery:n,handleSearch:s})=>r("form",{className:"mzp-c-form",role:"search",onSubmit:a=>{a.preventDefault(),s()},children:r("input",{type:"search",placeholder:t,required:!0,"aria-required":!0,value:e,onChange:a=>n(a.target.value)})}),It=S.div({display:"flex",flexDirection:"column",rowGap:32,"& > h1, & form, & input":{marginBottom:0},"& input":{width:"100%"},[`@media (min-width:${$.tablet})`]:{flexDirection:"row",justifyContent:"space-between",alignItems:"center","& input":{width:"auto"}}}),Rt=S.div(t=>({visibility:t.isVisible?"visible":"hidden","& > button":{width:"100%"},"& .ui.loader":{marginLeft:16},[`@media (min-width:${$.tablet})`]:{"& > button":{width:"auto"}}}));var Mt;(function(t){t[t.tablet=2]="tablet",t[t.desktop=3]="desktop"})(Mt||(Mt={}));const ln=S.div({display:"grid",gap:64,gridTemplateColumns:"1fr",[`@media (min-width:${$.tablet})`]:{justifyContent:"space-between",gridTemplateColumns:`repeat(${2}, 1fr)`},[`@media (min-width:${$.desktop})`]:{gridTemplateColumns:`repeat(${3}, 1fr)`}}),$t=({cards:t})=>r(ln,{children:t.map(({link:e,jsx:n,searchQuery:s})=>r("div",{children:r(W,{to:{pathname:e,state:{query:s||""}},style:{textDecoration:"none",color:ne.black,fontSize:de.font_size_6},children:n})},e))});var se;(function(t){t.APPROVE="Approve",t.REJECT="Reject",t.ABSTAIN="Abstain"})(se||(se={}));var he;(function(t){t.ADOPTED="Adopted",t.REJECTED="Rejected",t.IN_PROGRESS="In Progress"})(he||(he={}));var Ne;(function(t){t.PASSED="Passed",t.FAILED="Failed"})(Ne||(Ne={}));const dn=["en","de","es"],zt=10,un=({searchEventsState:t,bodies:e})=>{const{firebaseConfig:n}=K(),s=h.exports.useRef(t.query),[i,o]=h.exports.useState(t.query);me(s.current?`${b.events} -- ${s.current}`:b.events);const a=ce({name:"Date",initialState:t.dateRange,defaultDataValue:"",textRepFunction:xt}),c=ce({name:"Committee",initialState:t.committees,defaultDataValue:!1,textRepFunction:at,limit:He}),d=ce({name:"Sort",initialState:{by:"datetimeWeightedRelevance",order:G.desc,label:"Most relevant first"},defaultDataValue:"",textRepFunction:St}),l=h.exports.useCallback(async()=>{const E=new nn(n),x=await E.searchEvents(i),R=await Promise.all(x.map(z=>E.getRenderableEvent(z))),I=Ae(c.state);let P=R.filter(({event:z})=>{var A;if(I.length&&(!((A=z.body)==null?void 0:A.id)||!I.includes(z.body.id)))return!1;if(a.state.start||a.state.end){if(!z.event_datetime||a.state.start&&z.event_datetime<new Date(a.state.start))return!1;if(a.state.end){const U=new Date(a.state.end);if(U.setDate(U.getDate()+1),z.event_datetime>U)return!1}}return!0});return P=ye.exports.orderBy(P,[d.state.by],[d.state.order]),Promise.resolve(P)},[i,c.state,a.state,d.state,n]),m=re.exports.useMediaQuery({query:`(min-width: ${$.desktop})`}),[p,g]=en({batchSize:zt-(m?1:0),visibleCount:0,cards:[],fetchCards:!0,error:null},l),v=$e(),y=h.exports.useCallback(()=>{s.current=i;const E=`?q=${i.trim().replace(/\s+/g,"+")}`;history.pushState({},"",`#${v.pathname}${E}`),g({type:Y.FETCH_CARDS})},[i,v,g]),C=h.exports.useCallback(()=>g({type:Y.SHOW_MORE_CARDS}),[g]),_=h.exports.useMemo(()=>{if(p.fetchCards)return r(Ie,{active:!0,size:"massive"});if(p.error)return r(xe,{children:p.error.toString()});if(p.cards.length===0)return r(xe,{children:"No events found."});{const E=p.cards.slice(0,p.visibleCount).map(x=>{var I,P,z;const R=(I=x.event.event_datetime)==null?void 0:I.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});return{link:`/${q.EVENT}/${x.event.id}`,jsx:r(ft,{staticImgSrc:x.staticThumbnailURL,hoverImgSrc:x.hoverThumbnailURL,imgAlt:`${(P=x.event.body)==null?void 0:P.name} - ${R}`,meetingDate:R,committee:(z=x.event.body)==null?void 0:z.name,tags:x.keyGrams,excerpt:x.selectedContextSpan,gram:x.selectedGram,query:s.current}),searchQuery:s.current}});return f(ge,{children:[r(xe,{children:`${p.cards.length} ${q.EVENT}`}),r($t,{cards:E})]})}},[p.fetchCards,p.error,p.cards,p.visibleCount]),k=h.exports.useMemo(()=>p.visibleCount<p.cards.length&&!p.fetchCards,[p]);return f(Et,{children:[f(It,{children:[r("h1",{className:"mzp-u-title-sm",children:"Event Search Results"}),r(kt,{placeholder:b.search_topic_placeholder,query:i,setQuery:o,handleSearch:y})]}),r(Ct,{allBodies:e,filters:[c,a,d],sortOptions:[{by:"datetimeWeightedRelevance",order:G.desc,label:"Most relevant first"},{by:"pureRelevance",order:G.desc,label:"Closest match first"},{by:"event.event_datetime",order:G.desc,label:"Newest first"},{by:"event.event_datetime",order:G.asc,label:"Oldest first"}],handlePopupClose:y}),_,r(Rt,{isVisible:k,children:r("button",{className:"mzp-c-button mzp-t-secondary mzp-t-lg",onClick:C,children:"Show more events"})})]})},mn=()=>{const t=$e(),e=h.exports.useMemo(()=>{if(t.state)return t.state;const{q:o}=tt.parse(t.search);return{query:o||" ",committees:{},dateRange:{start:"",end:""}}},[t]),{firebaseConfig:n}=K(),s=h.exports.useCallback(async()=>{const a=await new ut(n).getAllBodies();return Promise.resolve({bodies:a,searchEventsState:e})},[n,e]),{state:i}=ee({isLoading:!1,error:null,hasFetchRequest:!0},s);return r(be,{isLoading:i.isLoading,error:i.error,children:i.data&&r(un,M({},i.data))})};class Tt{constructor(e){this.id=e.id,this.event_ref=e.event_ref.id,this.session_datetime=j(e.session_datetime),this.session_index=e.session_index,this.video_uri=e.video_uri,e.caption_uri&&(this.caption_uri=e.caption_uri),typeof e.event_ref=="object"&&!(e.event_ref instanceof N)&&(this.event=new le(e.event_ref)),e.external_source_id&&(this.external_source_id=e.external_source_id)}}class pn extends D{constructor(e){super(u.Session,e)}async getSessionsByEventId(e){const n=this.networkService.getDocuments(u.Session,[V(w.SessionEventRef,B.eq,O(F.getDb(),u.Event,e)),J("session_index")]);return this.createModels(n,Tt,`getSessionsByEventId(${e})`)}}class hn{constructor(e){this.id=e.id,this.confidence=e.confidence,this.generator=e.generator,this.created=j(e.created),this.file_ref=e.file_ref.id,this.session_ref=e.session_ref.id,typeof e.file_ref=="object"&&!(e.file_ref instanceof N)&&(this.file=new pe(e.file_ref)),typeof e.session_ref=="object"&&!(e.session_ref instanceof N)&&(this.session=new Tt(e.session_ref))}}class fn extends D{constructor(e){super(u.Transcript,e)}async getTranscriptBySessionId(e){const n=this.networkService.getDocuments(u.Transcript,[V(w.TranscriptSessionRef,B.eq,O(F.getDb(),u.Session,e)),J("confidence",G.desc),Le(1)],new H([new L(u.File,w.TranscriptFileRef)]));return this.createModels(n,hn,`getTranscriptBySessionId(${e})`)}}class We{constructor(e){this.id=e.id,this.matter_type=e.matter_type,this.name=e.name,this.title=e.title,e.external_source_id&&(this.external_source_id=e.external_source_id)}}class vn{constructor(e){this.id=e.id,this.name=e.name,e.description&&(this.description=e.description),e.external_source_id&&(this.external_source_id=e.external_source_id),e.matter_ref&&(e.matter_ref instanceof N?this.matter_ref=e.matter_ref.id:typeof e.matter_ref=="object"&&(this.matter=new We(e.matter_ref)))}}class Je{constructor(e){this.id=e.id,e.decision&&(this.decision=e.decision),this.event_ref=e.event_ref.id,typeof e.event_ref=="object"&&!(e.event_ref instanceof N)&&(this.event=new le(e.event_ref)),e.external_source_id&&(this.external_source_id=e.external_source_id),this.index=e.index,this.minutes_item_ref=e.minutes_item_ref.id,typeof e.minutes_item_ref=="object"&&!(e.minutes_item_ref instanceof N)&&(this.minutes_item=new vn(e.minutes_item_ref))}}class gn extends D{constructor(e){super(u.EventMinutesItem,e)}async getEventMinutesItemsByEventId(e){const n=this.networkService.getDocuments(u.EventMinutesItem,[V(w.EventMinutesItemEventRef,B.eq,O(F.getDb(),u.Event,e)),J("index")],new H([new L(u.MinutesItem,w.EventMinutesItemMinutesItemRef)]));return this.createModels(n,Je,`getEventMinutesItemsByEventId(${e})`)}}class _n{constructor(e){this.id=e.id,this.event_minutes_item_ref=e.event_minutes_item_ref.id,typeof e.event_minutes_item_ref=="object"&&!(e.event_minutes_item_ref instanceof N)&&(this.event_minutes_item=new Je(e.event_minutes_item_ref)),e.external_source_id&&(this.external_source_id=e.external_source_id),this.name=e.name,this.uri=e.uri}}class yn extends D{constructor(e){super(u.EventMinutesItemFile,e)}async getEventMinutesItemFilesByEventMinutesItemId(e){const n=this.networkService.getDocuments(u.EventMinutesItemFile,[V(w.EventMinutesItemFileEventMinutesItemRef,B.eq,O(F.getDb(),u.EventMinutesItem,e)),J("name")]);try{return this.createModels(n,_n,`getEventMinutesItemFilesByEventMinutesItemId(${e})`)}catch{return Promise.resolve([])}}}class Se{constructor(e){this.id=e.id,this.is_active=e.is_active,this.name=e.name,this.router_string=e.router_string,e.email&&(this.email=e.email),e.phone&&(this.phone=e.phone),e.website&&(this.website=e.website),e.picture_ref&&(e.picture_ref instanceof N?this.picture_ref=e.picture_ref.id:typeof e.picture_ref=="object"&&(this.picture=new pe(e.picture_ref))),e.external_source_id&&(this.external_source_id=e.external_source_id)}}class Nt{constructor(e){this.id=e.id,this.event_minutes_item_ref=e.event_minutes_item_ref.id,this.event_ref=e.event_ref.id,this.matter_ref=e.matter_ref.id,this.person_ref=e.person_ref.id,this.decision=e.decision,typeof e.event_ref=="object"&&!(e.event_ref instanceof N)&&(this.event=new le(e.event_ref)),typeof e.event_minutes_item_ref=="object"&&!(e.event_minutes_item_ref instanceof N)&&(this.event_minutes_item=new Je(e.event_minutes_item_ref)),e.external_source_id&&(this.external_source_id=e.external_source_id),e.in_majority&&(this.in_majority=e.in_majority),typeof e.matter_ref=="object"&&!(e.matter_ref instanceof N)&&(this.matter=new We(e.matter_ref)),typeof e.person_ref=="object"&&!(e.person_ref instanceof N)&&(this.person=new Se(e.person_ref))}}class Ft extends D{constructor(e){super(u.Vote,e)}async getVotesByEventId(e){const n=this.networkService.getDocuments(u.Vote,[V(w.VoteEventRef,B.eq,O(F.getDb(),u.Event,e)),J(w.VotePersonRef)],new H([new L(u.Person,w.VotePersonRef)]));return this.createModels(n,Nt,`getVotesByEventId(${e})`)}async getFullyPopulatedVotesByPersonId(e){const n=new L(u.Matter,w.VoteMatterRef),s=new L(u.Body,w.EventBodyRef),i=new H([s]),o=new L(u.Event,w.VoteEventRef,i),a=new L(u.EventMinutesItem,w.VoteEventMinutesItemRef),c=this.networkService.getDocuments(u.Vote,[V(w.VotePersonRef,B.eq,O(F.getDb(),u.Person,e))],new H([n,o,a]));return this.createModels(c,Nt,`getFullyPopulatedVotesByPersonId(${e})`)}}class bn{constructor(e){this.confidence=e.confidence,this.generator=e.generator,this.created_datetime=j(e.created_datetime),this.sentences=e.sentences,e.session_datetime&&(this.session_datetime=j(e.session_datetime)),e.annotations&&(this.annotations=e.annotations)}}class wn extends D{constructor(e){super(u.TranscriptJSON,e)}async download(e){const n=this.networkService.downloadJson(e);return this.createModel(n,bn,`download(${e})`)}}const Pt=()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),xn=()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"24",height:"24",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sn=()=>f("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"24",height:"24",children:[r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),Cn=S.div(t=>({display:"grid",gridTemplateColumns:"1fr",rowGap:8,padding:"8px 16px",backgroundColor:"white",borderLeft:`4px solid ${t.isJumpedTo?ne.dark_blue:"transparent"}`})),En=S.div({fontSize:de.font_size_5}),kn=S.div(t=>({display:"grid",columnGap:4,gridTemplateColumns:t.hasMultipleActions?"1fr auto auto":"1fr auto",justifyContent:"start",alignItems:"center"})),In=S.div({display:"grid",columnGap:4,gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",fontSize:de.font_size_2,overflowWrap:"anywhere","& p":{margin:0}}),Fe=24,Rn=S.img({objectFit:"cover",objectPosition:"center",borderRadius:"50%",width:Fe,height:Fe}),Mn=S.div({width:Fe,height:Fe}),Lt=S.button({padding:"2px 8px !important",display:"flex",justifyContent:"center",alignItems:"center"}),Bt=({sessionIndex:t,speakerName:e,text:n,startTime:s,speakerId:i,speakerPictureSrc:o,searchQuery:a,handleJumpToVideoClip:c,handleJumpToTranscript:d,componentRef:l})=>{const[m,p]=h.exports.useState(!1),g=h.exports.useRef(null);h.exports.useImperativeHandle(l,()=>({scrollIntoView:()=>{var _;(_=g.current)==null||_.scrollIntoView({behavior:"smooth",block:"center"}),p(!0),setTimeout(()=>{p(!1)},5e3)}}));const v=i?r(W,{to:`/people/${i}`,children:e}):r("div",{children:e}),y=o?r(Rn,{src:o,alt:e}):r(Mn,{children:r(Pt,{})}),C=h.exports.useMemo(()=>{const _=we(a||""),k=_e(_.split(" "));if(!_||k.length===0)return[];const E=k.map(R=>Re(R)),x=k.map((R,I)=>new RegExp(`\\b(${R}|${E[I]})`,"g"));return a&&a.trim().length>0&&x.push(new RegExp(a.trim(),"g")),x},[a]);return f(Cn,{isJumpedTo:m,ref:g,children:[r(En,{children:r(je,{caseSensitive:!1,searchWords:C,textToHighlight:n})}),f(kn,{hasMultipleActions:d!==void 0,children:[f(In,{children:[y,f("div",{children:[v,r("p",{children:`${b.session} ${t+1}`}),r("p",{children:s})]})]}),r("div",{children:r(Me,{position:"top right",content:b.jump_to_sentence_video,size:"mini",trigger:r(Lt,{"aria-label":b.jump_to_sentence_video,className:"mzp-c-button mzp-t-neutral",onClick:c,children:r(Sn,{})})})}),d&&r("div",{children:r(Me,{position:"top right",content:b.jump_to_sentence_transcript,size:"mini",trigger:r(Lt,{"aria-label":b.jump_to_sentence_transcript,className:"mzp-c-button mzp-t-neutral",onClick:d,children:r(xn,{})})})})]})]})};function Ce(t){return`${t}`.padStart(2,"0")}function Vt(t){const e=Math.floor(t),n=Math.floor(e/3600),s=Math.floor((e-n*3600)/60),i=e-n*3600-s*60;return`${Ce(n)}:${Ce(s)}:${Ce(i)}`}const $n=({searchQuery:t,sentences:e,jumpToVideoClip:n,jumpToTranscript:s})=>{const i=(l,m)=>()=>n(l,m),o=l=>()=>{s(l)},a=new vr({fixedWidth:!0,defaultHeight:100}),c=()=>{a.clearAll()},d=({index:l,parent:m,key:p,style:g})=>r(yr,{cache:a,parent:m,columnIndex:0,rowIndex:l,children:r("div",{style:g,role:"row",children:r("div",{style:{margin:"0 0 16px 0"},role:"cell",children:r(Bt,{sessionIndex:e[l].session_index,speakerName:e[l].speaker_name,text:e[l].text,startTime:Vt(e[l].start_time),handleJumpToVideoClip:i(e[l].session_index,e[l].start_time),searchQuery:t,speakerId:e[l].speaker_id,speakerPictureSrc:e[l].speaker_pictureSrc,handleJumpToTranscript:o(e[l].index)})})})},p);return r(gr,{onResize:c,children:({width:l,height:m})=>r(_r,{deferredMeasurementCache:a,height:m,rowCount:e.length,rowHeight:a.rowHeight,rowRenderer:d,scrollToIndex:0,style:{willChange:""},width:l})})},zn=S.div({display:"flex",flexDirection:"column",height:"100%"}),Tn=S.div({display:"flex",flexDirection:"column",justifyContent:"start",marginBottom:"16px","div:first-of-type":{fontSize:de.font_size_7,fontWeight:600},[`@media (min-width:${$.tablet})`]:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"}}),Nn=S.div(t=>({minHeight:t.hasSearchResults?"80vh":0,[`@media (min-width:${$.tablet})`]:{minHeight:t.hasSearchResults?"50vh":0},[`@media (min-aspect-ratio:5/4), (min-width:${$.desktop})`]:{flex:"1 1 auto",minHeight:0}})),Fn=({searchQuery:t,sentences:e,jumpToVideoClip:n,jumpToTranscript:s})=>{const[i,o]=h.exports.useState(t),a=g=>{o(g.target.value)},[c,d]=h.exports.useState(t),l=g=>{g.preventDefault(),d(i)},m=h.exports.useMemo(()=>e?e.map(({text:g})=>{const v=we(g),C=_e(v.split(" ")).map(_=>Re(_).toLowerCase());return new Set(C)}):[],[e]),p=h.exports.useMemo(()=>{if(e){if(!c.trim())return e;const g=we(c),v=_e(g.split(" "));if(!g||v.length===0)return[];const y=v.map(C=>Re(C).toLowerCase());return e.filter((C,_)=>y.some(k=>m[_].has(k)))}return[]},[e,m,c]);return f(zn,{children:[f(Tn,{children:[r("div",{children:b.search_transcript}),r("div",{children:e?b.number_of_results.replace("{number}",`${p.length}`):"Fetching transcript..."})]}),e&&r("form",{className:"mzp-c-form",role:"search",onSubmit:l,children:r("input",{style:{width:"100%"},type:"search",placeholder:b.search_transcript_placeholder,value:i,onChange:a})}),r(Nn,{hasSearchResults:p.length!==0,children:r($n,{searchQuery:c,sentences:p,jumpToVideoClip:n,jumpToTranscript:s})})]})},At=t=>{const e=t.trim().split(":").reverse();let n=0;return e.forEach((s,i)=>{const o=parseFloat(s);isNaN(o)||s.includes("-")?n+=NaN:n+=o*Math.pow(60,i)}),n&&(n=Math.floor(n)),n},Ut=t=>{if(isNaN(t))return"NaN";const e=Math.floor(t),n=Math.floor(e/3600),s=Math.floor((e-n*3600)/60),i=e-n*3600-s*60,o=Ce(i);return n>0?`${n}:${Ce(s)}:${o}`:`${s}:${o}`};var ie;(function(t){t[t.UPDATE_VALUE=0]="UPDATE_VALUE",t[t.VALIDATE_VALUE=1]="VALIDATE_VALUE",t[t.OPEN=2]="OPEN",t[t.CLOSE=3]="CLOSE"})(ie||(ie={}));const Pn={value:"",isDisabled:!1,isActive:!1,isOpen:!1},Ln=(t,e)=>{switch(e.type){case 0:return T(M({},t),{value:e.payload});case 1:{const n=Ut(At(t.value));return e.payload!==void 0?T(M({},t),{value:n,isDisabled:!e.payload,isActive:e.payload}):T(M({},t),{value:n})}case 2:{const n=Ut(e.payload);return T(M({},t),{isOpen:!0,value:n,isDisabled:!1,isActive:!1})}case 3:return T(M({},t),{isOpen:!1});default:return t}},Bn=()=>r("svg",{transform:"scale(-1,1)",xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),Vn=S.button({display:"flex",justifyContent:"center",alignItems:"center",columnGap:4,border:0,padding:"8px 16px",fontWeight:600,"& > svg":{width:"1rem",height:"1rem"}}),An=S.div({border:`1px solid ${ne.lightgrey}`,borderRadius:2,display:"flex",justifyContent:"space-between",alignItems:"center",columnGap:24,"& > input":{flex:1,border:0,marginLeft:16},"& > .mzp-c-button":{padding:"8px 16px",fontWeight:600,border:0},"& > .mzp-c-button, & > .mzp-c-button:hover":{color:ne.dark_blue}}),Un=S.div({display:"flex",alignItems:"center",columnGap:8,"& > label":{padding:0}}),qn=S.input(t=>({border:0,borderBottomColor:t.disabled?"white":"black",borderBottomStyle:"solid",borderBottomWidth:"1.5px",width:64})),Gn=S(Ve)({"i.close.icon":{top:0,right:0,color:"black"},"i.close::before":{content:'"\u2716"'}}),Hn=({sessionIndex:t,getCurrentTime:e})=>{const n=h.exports.useRef(null),s=h.exports.useRef(null),i=h.exports.useRef(null),o=$e(),[a,c]=h.exports.useReducer(Ln,Pn),d=h.exports.useCallback(()=>{const _=e();c({type:ie.OPEN,payload:_})},[e]),l=()=>{c({type:ie.CLOSE})},m=_=>{c({type:ie.VALIDATE_VALUE,payload:_.target.checked})},p=async()=>{var _;(_=s.current)==null||_.select(),navigator.clipboard?await navigator.clipboard.writeText(C()):document.execCommand("copy")},g=_=>{c({type:ie.UPDATE_VALUE,payload:_.target.value})},v=()=>{c({type:ie.VALIDATE_VALUE})},y=_=>{_.key==="Enter"&&c({type:ie.VALIDATE_VALUE})},C=h.exports.useCallback(()=>{const _=At(a.value),k=`${document.location.href.split("#")[0]}#${o.pathname}?s=${t}`;return a.isActive&&_?`${k}&t=${_}`:`${k}`},[a.value,a.isActive,t,o]);return f(ge,{children:[f(Gn,{closeIcon:!0,trigger:f(Vn,{className:"mzp-c-button mzp-t-secondary",onClick:d,children:[r(Bn,{}),"SHARE"]}),open:a.isOpen,onClose:l,mountNode:n.current,size:"small",children:[r(Ve.Header,{children:"Share"}),f(Ve.Content,{children:[f(An,{children:[r("input",{readOnly:!0,"aria-readonly":!0,ref:s,value:C()}),r("button",{className:"mzp-c-button mzp-t-secondary",onClick:p,children:"COPY"})]}),r("br",{}),f(Un,{children:[r("input",{id:"share-with-time-point",type:"checkbox",checked:a.isActive,onChange:m}),r("label",{htmlFor:"share-with-time-point",children:"Start at"}),r(qn,{disabled:a.isDisabled,value:a.value,onChange:g,onBlur:v,onKeyUp:y,ref:i})]})]})]}),r("div",{ref:n})]})},Dn=()=>{dn.map(t=>{try{const e=require(`video.js/dist/lang/${t}.json`);rt.addLanguage(t,e)}catch(e){console.error(e,`Language ${t} wasn't add to video.js`)}})};Dn();var qt;(function(t){t[t.SPACE=32]="SPACE",t[t.ARROW_LEFT=37]="ARROW_LEFT",t[t.ARROW_RIGHT=39]="ARROW_RIGHT",t[t.F=70]="F",t[t.K=75]="K",t[t.M=77]="M"})(qt||(qt={}));const Gt=10,Qn=({sessionIndex:t,uri:e,componentRef:n,initialSeconds:s})=>{const i=h.exports.useRef(null),o=h.exports.useRef();h.exports.useImperativeHandle(n,()=>({seekTo:d=>{var l,m,p;(l=o.current)==null||l.currentTime(d),((m=o.current)==null?void 0:m.paused())&&((p=o.current)==null||p.play())},pause:()=>{var d;return(d=o.current)==null?void 0:d.pause()}}));const a=h.exports.useCallback(()=>o.current?o.current.currentTime():0,[]),c=()=>f(ge,{children:[r("div",{style:{display:"flex",flexDirection:"row-reverse",marginBottom:4},children:r(Hn,{sessionIndex:t,getCurrentTime:a})}),r("div",{"data-vjs-player":!0,children:r("video",{ref:i,className:"video-js vjs-big-play-centered vjs-theme-cdp"})})]});return h.exports.useEffect(()=>{const d=i.current;let l;return d&&(l=rt(d,{autoplay:!1,controls:!0,controlBar:{currentTimeDisplay:!0,timeDivider:!0,durationDisplay:!0,customControlSpacer:!0,remainingTimeDisplay:!1},preload:s?"auto":"metadata",aspectRatio:"16:9",fluid:!0,language:b.getLanguage(),playbackRates:[2,1.5,1,.75,.5],responsive:!0,sources:[{src:e}],userActions:{hotkeys:m=>{var p,g,v,y,C,_,k,E,x,R,I,P;m.which===75||m.which===32?((p=o.current)==null?void 0:p.paused())?(g=o.current)==null||g.play():(v=o.current)==null||v.pause():m.which===77?(C=o.current)==null||C.muted(!((y=o.current)==null?void 0:y.muted())):m.which===70?((_=o.current)==null?void 0:_.isFullscreen())?(k=o.current)==null||k.exitFullscreen():(E=o.current)==null||E.requestFullscreen():m.which===37?(R=o.current)==null||R.currentTime(((x=o.current)==null?void 0:x.currentTime())-Gt):m.which===39&&((P=o.current)==null||P.currentTime(((I=o.current)==null?void 0:I.currentTime())+Gt))}}},function(){s&&s>0&&this.currentTime(s),o.current=this})),()=>{l&&l.dispose()}},[e,s]),r(c,{})};var Ht=S(br)(t=>({"& > .ui.tab":{margin:0,border:0,padding:t.padding},[`@media (min-width:${$.tablet})`]:{"& > .ui.menu > a.item":{fontSize:de.font_size_7}},[`@media (max-width:${t.breakpoint})`]:{"& > .ui.menu":{flexDirection:"column"},"& > .ui.secondary.pointing.menu > a.item":{alignSelf:"flex-start",borderBottomStyle:"none"},"& > .ui.secondary.pointing.menu > a.active.item":{borderLeft:"2px solid"}}}));const On=({eventVideoRefs:t,sessions:e,currentSession:n,initialSeconds:s,setCurrentSession:i})=>{const o=(d,l)=>i(m=>{var p;return(p=t[m].current)==null||p.pause(),l.activeIndex}),a=h.exports.useRef(e.map((d,l)=>({menuItem:`${b.session} ${l+1}`,pane:{key:`session_index_${l+1}`,content:r(Qn,{sessionIndex:l,initialSeconds:l===n?s:0,uri:d.video_uri,componentRef:t[l]})}}))),c=e.length>3?$.largeMobile:$.smallMobile;return r(Ht,{padding:"0px",breakpoint:c,menu:{secondary:!0,pointing:!0},panes:a.current,renderActiveOnly:!1,activeIndex:n,onTabChange:o})};var Wn=ae.memo(On);const Jn=S.div({maxHeight:"100vh",overflowY:"auto"}),Zn=({sentences:t,transcriptItemsRefs:e,jumpToVideoClip:n})=>{const s=(i,o)=>()=>n(i,o);return r(Jn,{children:t.map((i,o)=>r(Bt,{sessionIndex:i.session_index,speakerName:i.speaker_name,text:i.text,startTime:Vt(i.start_time),handleJumpToVideoClip:s(i.session_index,i.start_time),searchQuery:"",speakerId:i.speaker_id,speakerPictureSrc:i.speaker_pictureSrc,componentRef:e[o]},i.index))})},Xn=()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})}),Yn=()=>r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),Kn=S.summary({color:ne.dark_blue,display:"flex",alignItems:"center","&::before, &::marker":{content:"none"},"& svg":{marginLeft:4,width:"1rem",height:"1rem"}}),jn=({documents:t})=>{const[e,n]=h.exports.useState(!1),s=()=>n(i=>!i);return!t||t.length===0?null:f("details",{open:e,onToggle:s,children:[f(Kn,{children:[b.see_documents,e?r(Xn,{}):r(Yn,{})]}),r("ul",{children:t.map(i=>r("li",{children:r("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",children:i.label})},i.label))})]})},es=S.li({"& > div:first-of-type":{fontWeight:600},"& > a":{display:"flex",alignItems:"center"},"& > a > svg":{width:"1rem",height:"1rem",transform:"rotate(-90deg)"}}),ts=({minutesItems:t})=>r("ol",{className:"mzp-u-list-styled",children:t.map(e=>f(es,{children:[r("div",{children:e.name}),e.matter_ref&&f(W,{to:`/matters/${e.matter_ref}`,children:["Go to Full Legislation Details"," ",r(vt,{})]}),e.description&&r("div",{children:e.description}),r(jn,{documents:e.documents})]},e.name))}),rs=()=>r("svg",{className:"cdp-neon-green",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),ns=()=>r("svg",{className:"cdp-red",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),ss=()=>r("svg",{className:"cdp-dark-blue",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),is=()=>r("svg",{className:"cdp-light-purple",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})}),Ee=({result:t})=>{let e=r("div",{});switch(t){case se.APPROVE:case Ne.PASSED:case he.ADOPTED:e=r(rs,{});break;case Ne.FAILED:case se.REJECT:case he.REJECTED:e=r(ns,{});break;case se.ABSTAIN:e=r(is,{});break;case he.IN_PROGRESS:e=r(ss,{});break}return re.exports.useMediaQuery({query:`(max-width: ${$.tablet})`})?r("div",{style:{height:24,width:24},children:e}):f("div",{style:{display:"flex",flex:1,alignItems:"center"},children:[r("div",{style:{height:24,width:24},children:e}),r("div",{children:r("p",{className:"mzp-c-card-desc",style:{marginLeft:8},children:`${b[t.toLowerCase().replace(" ","_")]}`})})]})};Ee.defaultProps={result:he.IN_PROGRESS};const Pe=({index:t})=>{const e=t%2==0?"rgb(236,236,236)":"white";return r("div",{style:{display:"flex",flex:1,flexDirection:"column",padding:16,borderBottom:"1px solid #000000",backgroundColor:e},children:r("p",{className:"mzp-c-card-desc",children:t===0?"No results found.":"Record missing."})})},Dt=({index:t,children:e,columnNames:n,columnDistribution:s,onClick:i})=>{const o=t%2==0?ht.COLORS.EVEN_CELL:ht.COLORS.ODD_CELL,a=re.exports.useMediaQuery({query:`(max-width: ${$.tablet})`});return!e||e.length===0?r(Pe,{index:t}):a?r("div",{style:{display:"flex",flex:1,flexDirection:"column",padding:16,borderBottom:"1px solid #000000",backgroundColor:o},children:e==null?void 0:e.map((c,d)=>{const l=n?n[d]:"";return f("div",{style:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"flex-start"},children:[r("p",{style:{flex:1,fontWeight:"bold",paddingRight:8},className:"mzp-c-card-desc",children:l}),c]},d)})}):r("div",{style:{display:"flex",flex:1,backgroundColor:o,flexDirection:"row",padding:16},onClick:i,children:e==null?void 0:e.map((c,d)=>{const l=s?s[d]:"0%";return r("div",{style:{width:l},children:c},d)})})};function os(t,e,n){if(t)return r(ae.Fragment,{children:e.map((s,i)=>{const o=`/people/${s.personId}`;return f("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[r(W,{style:{flex:1},to:o,children:s.name}),r(Ee,{result:s.decision})]},`individual-vote-${i}-${s.id}`)})});{let s=0,i=0,o=0;e.forEach(l=>{l.decision===se.APPROVE&&s++,l.decision===se.REJECT&&i++,l.decision===se.ABSTAIN&&o++});const a=b.number_approved.replace("{number}",`${s}`),c=b.number_rejected.replace("{number}",`${i}`),d=b.number_abstained.replace("{number}",`${o}`);return n?f("div",{style:{display:"flex",flexDirection:"column"},children:[r("p",{children:a}),r("p",{children:c}),r("p",{children:d})]}):r("p",{children:`${a} ${Te} ${c} ${Te} ${d}`})}}const as=({index:t,legislationLink:e,legislationName:n,legislationDescription:s,councilDecision:i,votes:o,columnNames:a,columnDistribution:c})=>{const[d,l]=h.exports.useState(!1),m=re.exports.useMediaQuery({query:`(max-width: ${$.tablet})`});return f(Dt,{index:t,columnNames:a,columnDistribution:c,onClick:()=>{l(!d)},children:[f("div",{children:[r(W,{to:e,children:n}),!m&&r("p",{children:s})]}),r(Ee,{result:i}),os(d,o,m)]},`meeting-table-row-${t}`)},cs=({columnNames:t,columnDistribution:e})=>re.exports.useMediaQuery({query:`(max-width: ${$.tablet})`})?null:r("div",{style:{display:"flex",flex:1,flexDirection:"row"},children:t==null?void 0:t.map((s,i)=>{const o=e[i]||0;return r("div",{style:{width:o},children:r("h6",{children:s})},s)})});function ls(t){return r(Pe,{index:t},`empty-table-row-${t}`)}const Qt=({data:t,renderRow:e,columnDistribution:n,columnNames:s,caption:i})=>{const o=!t||!t.length||t.length===0;return f(ae.Fragment,{children:[i,r(cs,{columnDistribution:n,columnNames:s}),o&&ls(0),t.map((a,c)=>e(a,c))]})};function ds(t){return r(Pe,{index:t},`empty-table-row-${t}`)}const us=({votesPage:t})=>{const e=[b.legislation,b.council_decision,b.votes],n=["35%","25%","40%"];function s(i,o){if(!i.matter||!i.votes)return ds(o);const a=i.matter.name,c=i.matter.description,d=i.council_decision,l=`/matters/${i.matter.id}`;return r(as,{index:o,legislationName:a,legislationDescription:c,councilDecision:d,legislationLink:l,votes:i.votes,columnDistribution:n,columnNames:e},`meeting-voting-table-row-${o}`)}return r(Qt,{data:t,columnDistribution:n,columnNames:e,caption:r("p",{children:b.meeting_votes_caption}),renderRow:s})},ms=({currentInfoTab:t,setCurrentInfoTab:e,sentences:n,transcriptItemsRefs:s,eventMinutesItems:i,votes:o,jumpToVideoClip:a})=>{const c=(v,y)=>e(y.activeIndex),d=h.exports.useMemo(()=>i.map(({minutes_item:v,files:y})=>({name:v==null?void 0:v.name,description:v==null?void 0:v.description,matter_ref:v==null?void 0:v.matter_ref,documents:y&&y.length>0?y.map(({name:C,uri:_})=>({label:C,url:_})):void 0})),[i]),l=h.exports.useMemo(()=>o.reduce((v,y)=>(Object.keys(v).includes(y.event_minutes_item_ref)||(v[y.event_minutes_item_ref]=[]),v[y.event_minutes_item_ref].push(y),v),{}),[o]),m=h.exports.useMemo(()=>i.map(v=>l[v.id]||[]),[l,i]),p=h.exports.useMemo(()=>{const v=[];return i.forEach(({minutes_item:y,decision:C},_)=>{const k=m[_];k&&k.length>0&&v.push({matter:{name:y==null?void 0:y.name,description:y==null?void 0:y.description,id:y==null?void 0:y.matter_ref},council_decision:C,votes:k.map(({person:E,decision:x,id:R})=>({personId:E==null?void 0:E.id,name:E==null?void 0:E.name,decision:x,id:R}))})}),v},[i,m]),g=h.exports.useMemo(()=>[{menuItem:b.agenda,pane:{key:"agenda",content:r(ts,{minutesItems:d})}},{menuItem:b.transcript,pane:{key:"transcript",content:n?r(Zn,{sentences:n,transcriptItemsRefs:s,jumpToVideoClip:a}):r("div",{children:"Fetching transcript..."})}},{menuItem:b.votes,pane:{key:"votes",content:r(us,{votesPage:p})}}],[d,n,s,a,p]);return r(Ht,{padding:"16px",menu:{secondary:!0,pointing:!0},panes:g,activeIndex:t,onTabChange:c,renderActiveOnly:!1})};var ps=ae.memo(ms);const hs=S.div({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",rowGap:"32px","& > *":{width:"100%"}}),fs=S.div({"& > h2":{margin:0}}),vs=S.div({position:"sticky",top:0,zIndex:2,backgroundColor:"white",[`@media (min-width:${$.tablet})`]:{position:"static"},[`@media (min-aspect-ratio:5/4), (min-width:${$.desktop})`]:{width:"50%"}}),gs=S.div({[`@media (min-aspect-ratio:5/4), (min-width:${$.desktop})`]:{width:"47%"}}),_s=({event:t,sessions:e,sentences:n,eventMinutesItems:s,votes:i,initialSession:o,initialSeconds:a,searchQuery:c})=>{var E,x,R,I,P;me(`${(E=t.body)==null?void 0:E.name}${((x=t.body)==null?void 0:x.name)&&t.event_datetime&&" -- "}${(R=t.event_datetime)==null?void 0:R.toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"})}`);const[d,l]=h.exports.useState(o),[m,p]=h.exports.useState(0),g=h.exports.useRef(e.map(()=>h.exports.createRef())),v=h.exports.useCallback((z,A)=>{var U;l(oe=>{var fe;return oe!==z&&((fe=g.current[oe].current)==null||fe.pause()),z}),(U=g.current[z].current)==null||U.seekTo(A)},[g]),y=h.exports.useMemo(()=>(n||[]).map(()=>h.exports.createRef()),[n]),[C,_]=h.exports.useState(),k=h.exports.useCallback(z=>{var A;m!==1?(p(1),_(z)):(A=y[z].current)==null||A.scrollIntoView()},[y,m]);return h.exports.useEffect(()=>{var z;m===1&&C!==void 0&&((z=y[C].current)==null||z.scrollIntoView(),_(void 0))},[m,C,y]),f(hs,{children:[f(fs,{children:[r("h2",{className:"mzp-u-title-xs",children:(I=t.body)==null?void 0:I.name}),r("p",{className:"mzp-c-card-desc",children:(P=t.event_datetime)==null?void 0:P.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),r(vs,{children:r(Wn,{eventVideoRefs:g.current,sessions:e,currentSession:d,initialSeconds:a,setCurrentSession:l})}),r(gs,{children:r(Fn,{searchQuery:c||"",sentences:n,jumpToVideoClip:v,jumpToTranscript:k})}),r("div",{children:r(ps,{currentInfoTab:m,setCurrentInfoTab:p,sentences:n,transcriptItemsRefs:y,eventMinutesItems:s,votes:i,jumpToVideoClip:v})})]})},ke={isLoading:!1,error:null,hasFetchRequest:!0},ys=()=>{const{id:t}=nt(),{firebaseConfig:e}=K(),n=$e(),s=h.exports.useMemo(()=>n.state?n.state.query:"",[n.state]),[i,o]=h.exports.useMemo(()=>{const{s:R,t:I}=tt.parse(n.search);return[R,I].map(P=>{if(P!==null&&typeof P=="string"){const z=parseFloat(P);return isNaN(z)||z<0?0:Math.floor(z)}else return 0})},[n.search]),a=h.exports.useCallback(async()=>{const I=await new Qe(e).getEventById(t);return Promise.resolve(I)},[e,t]),{state:c}=ee(M({},ke),a),d=h.exports.useCallback(async()=>{const I=await new pn(e).getSessionsByEventId(t);return Promise.resolve(I)},[e,t]),{state:l}=ee(M({},ke),d),m=h.exports.useCallback(async()=>{const R=new gn(e),I=new yn(e),P=await R.getEventMinutesItemsByEventId(t),z=await Promise.all(P.map(({id:A})=>I.getEventMinutesItemFilesByEventMinutesItemId(A)));return Promise.resolve(P.map((A,U)=>T(M({},A),{files:z[U]})))},[e,t]),{state:p}=ee(M({},ke),m),g=h.exports.useCallback(async()=>{const I=await new Ft(e).getVotesByEventId(t);return Promise.resolve(I)},[e,t]),{state:v}=ee(M({},ke),g),y=h.exports.useCallback(async()=>{const R=new fn(e),I=new wn(e);if(l.data){const P=await Promise.all(l.data.map(({id:U})=>R.getTranscriptBySessionId(U))),z=await Promise.all(P.map(U=>{var oe;return I.download((oe=U[0].file)==null?void 0:oe.uri)})),A=[];return z.forEach((U,oe)=>{var fe;(fe=U==null?void 0:U.sentences)==null||fe.forEach(ve=>{A.push({session_index:oe,index:A.length,start_time:ve.start_time,end_time:ve.end_time,text:ve.text,speaker_name:ve.speaker_name,speaker_index:ve.speaker_index,speaker_id:void 0,speaker_pictureSrc:void 0})})}),Promise.resolve(A)}return Promise.resolve([])},[e,l.data]),{state:C,dispatch:_}=ee(T(M({},ke),{hasFetchRequest:!1}),y);h.exports.useEffect(()=>{l.data&&_({type:X.FETCH})},[l.data,_]);const k=h.exports.useMemo(()=>c.isLoading||l.isLoading||p.isLoading||v.isLoading,[c.isLoading,l.isLoading,p.isLoading,v.isLoading]),E=h.exports.useMemo(()=>{if(!(!c.data||!l.data||!p.data||!v.data))return{event:c.data,sessions:l.data,eventMinutesItems:p.data,votes:v.data}},[c.data,l.data,p.data,v.data]),x=h.exports.useMemo(()=>{const R=[c.error,l.error,p.error,v.error,C.error].map(I=>(I==null?void 0:I.message)||"").filter(I=>I.length>0);return R.length>0?new Error(R.join(`
`)):null},[c.error,l.error,p.error,v.error,C.error]);return r(be,{isLoading:k,error:x,children:E&&r(_s,T(M({},E),{sentences:C.data,searchQuery:s,initialSession:i>0&&i<E.sessions.length?i:0,initialSeconds:o}))})};var te;(function(t){t.FAILURE="FAILURE",t.SUCCESS="SUCCESS",t.FETCH_EVENTS="FETCH_EVENTS"})(te||(te={}));function bs(t,e){switch(e.type){case te.SUCCESS:return T(M({},t),{events:t.fetchEvents?e.payload:[...t.events,...e.payload],fetchEvents:!1,showMoreEvents:!1,hasMoreEvents:e.payload.length===t.batchSize});case te.FAILURE:return T(M({},t),{error:e.payload,fetchEvents:!1,showMoreEvents:!1});case te.FETCH_EVENTS:return T(M({},t),{error:null,fetchEvents:e.payload,showMoreEvents:!e.payload});default:return t}}function ws(t,e){const[n,s]=h.exports.useReducer(bs,t);return h.exports.useEffect(()=>{let i=!1;const o=async()=>{try{const a=!n.fetchEvents&&n.events.length>0?n.events[n.events.length-1].event_datetime:void 0,d=await e(n.batchSize,a)();i||s({type:te.SUCCESS,payload:d})}catch(a){if(!i){const c=Z(a);s({type:te.FAILURE,payload:c})}}};return(n.fetchEvents||n.showMoreEvents)&&o(),()=>{i=!0}},[n.batchSize,n.events,n.fetchEvents,n.showMoreEvents,e,s]),[n,s]}const xs=({bodies:t})=>{const{firebaseConfig:e}=K(),n=ce({name:"Date",initialState:{start:"",end:""},defaultDataValue:"",textRepFunction:xt}),s=ce({name:"Committee",initialState:t.reduce((_,k)=>(_[k.id]=!1,_),{}),defaultDataValue:!1,textRepFunction:at,limit:He}),i=ce({name:"Sort",initialState:{by:"event_datetime",order:G.desc,label:"Newest first"},defaultDataValue:"",textRepFunction:St}),o=h.exports.useCallback((_,k)=>async()=>{const E=new Qe(e),x=await E.getEvents(_,Ae(s.state),{start:n.state.start?new Date(n.state.start):void 0,end:n.state.end?new Date(n.state.end):void 0},{by:i.state.by,order:i.state.order},k),R=await Promise.all(x.map(I=>E.getRenderableEvent(I)));return Promise.resolve(R)},[e,s.state,n.state,i.state]),a=re.exports.useMediaQuery({query:`(min-width: ${$.desktop})`}),[c,d]=ws({batchSize:zt-(a?1:0),events:[],fetchEvents:!0,showMoreEvents:!1,hasMoreEvents:!1,error:null},o),l=Ke(),[m,p]=h.exports.useState(""),g=()=>{const _=`?q=${m.trim().replace(/\s+/g,"+")}`;l.push({pathname:`/${q.EVENT}/search`,search:_,state:{query:m.trim(),committees:s.state,dateRange:n.state}})},v=h.exports.useCallback(()=>{d({type:te.FETCH_EVENTS,payload:!0})},[d]),y=h.exports.useCallback(()=>d({type:te.FETCH_EVENTS,payload:!1}),[d]),C=h.exports.useMemo(()=>{if(c.fetchEvents)return r(Ie,{active:!0,size:"massive"});if(c.error)return r(xe,{children:c.error.toString()});if(c.events.length===0)return r(xe,{children:"No events found."});{const _=c.events.map(k=>{var x,R,I;const E=(x=k.event_datetime)==null?void 0:x.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});return{link:`/${q.EVENT}/${k.id}`,jsx:r(ft,{staticImgSrc:k.staticThumbnailURL,hoverImgSrc:k.hoverThumbnailURL,imgAlt:`${(R=k.body)==null?void 0:R.name} - ${E}`,meetingDate:E,committee:(I=k.body)==null?void 0:I.name,tags:k.keyGrams})}});return r($t,{cards:_})}},[c.fetchEvents,c.error,c.events]);return f(Et,{children:[f(It,{children:[r("h1",{className:"mzp-u-title-sm",children:b.events}),r(kt,{placeholder:b.search_topic_placeholder,query:m,setQuery:p,handleSearch:g})]}),r(Ct,{allBodies:t,filters:[s,n,i],sortOptions:[{by:"event_datetime",order:G.desc,label:"Newest first"},{by:"event_datetime",order:G.asc,label:"Oldest first"}],handlePopupClose:v}),C,r(Rt,{isVisible:c.hasMoreEvents&&!c.fetchEvents,children:f("button",{className:"mzp-c-button mzp-t-secondary mzp-t-lg",onClick:y,children:[r("span",{children:"Show more events"}),r(Ie,{inline:!0,active:c.showMoreEvents,size:"tiny"})]})})]})},Ss=()=>{const{firebaseConfig:t}=K();me(b.events);const e=h.exports.useCallback(async()=>{const i=await new ut(t).getAllBodies();return Promise.resolve({bodies:i})},[t]),{state:n}=ee({isLoading:!1,error:null,hasFetchRequest:!0},e);return r(be,{isLoading:n.isLoading,error:n.error,children:n.data&&r(xs,M({},n.data))})};class Ot extends D{constructor(e){super(u.Person,e)}async getPersonById(e){const n=new L(u.File,w.PersonPictureRef),s=this.networkService.getDocument(e,u.Person,new H([n]));return this.createModel(s,Se,`getPersonById(${e})`)}async getAllPeople(){const e=this.networkService.getDocuments(u.Person,[]);return this.createModels(e,Se,"getAllPeople")}}S.div({float:"right",marginRight:8,height:24,width:24});const Cs=S.div({float:"right",marginRight:8,marginBottom:8,borderRadius:"10%",padding:"0 4px"}),Wt=S.img(t=>({objectFit:"cover",left:`${t.left} !important`,width:`${t.width} !important`,height:"100%"})),Es=S.p({margin:"12px 0 0 !important"}),ks=({personName:t,personPictureSrc:e,personIsActive:n,seatName:s,seatElectoralArea:i,seatPictureSrc:o,chairedBodyNames:a,tenureStatus:c,billsSponsored:d})=>{const l=o!==void 0;return r("section",{className:"mzp-c-card mzp-c-card-medium mzp-has-aspect-16-9",children:f("div",{className:"mzp-c-card-block-link",children:[f("div",{className:"mzp-c-card-media-wrapper",children:[e&&r(Wt,{className:"mzp-c-card-image",src:e,width:l?"40%":"100%",left:"0",alt:t}),l&&r(Wt,{className:"mzp-c-card-image",src:o,width:"60%",left:"40%",alt:`${s} - ${i}`})]}),f("div",{className:"mzp-c-card-content",children:[r("h2",{className:"mzp-c-card-title",children:t}),r(Cs,{className:n?"cdp-bg-neon-green":"cdp-bg-dark-grey",children:n?"active":"inactive"}),f("p",{className:"mzp-c-card-desc",children:[s," \u2022 ",i]}),r("p",{className:"mzp-c-card-meta",children:b.chair}),r("p",{className:"mzp-c-card-desc",children:a}),r(Es,{className:"mzp-c-card-meta",children:b.tenure}),f("p",{className:"mzp-c-card-desc",children:[c," \u2022 ",d," ",b.bills_sponsored]})]})]})})},Is=({index:t,legislationLink:e,legislationName:n,legislationTags:s,voteDecision:i,councilDecision:o,meetingDate:a,meetingLink:c,committeeName:d,columnNames:l,columnDistribution:m})=>{const p=s&&s.length>0?s.join(Te):"",g=a==null?void 0:a.toDateString(),v=re.exports.useMediaQuery({query:`(max-width: ${$.tablet})`});return f(Dt,{index:t,columnNames:l,columnDistribution:m,children:[f(ae.Fragment,{children:[r(W,{to:e,children:n}),!v&&r("p",{className:"mzp-c-card-desc",children:p})]}),r(Ee,{result:i}),r(Ee,{result:o}),f(ae.Fragment,{children:[r(W,{to:c,children:g}),!v&&r("p",{className:"mzp-c-card-desc",children:d})]})]},`voting-table-row-${t}`)};function Rs(t){return r(Pe,{index:t},`empty-table-row-${t}`)}const Ms=({name:t,votesPage:e})=>{const n=[b.legislation,b.persons_vote.replace("{name}",t),b.council_decision,b.meeting],s=["30%","15%","20%","35%"];function i(o,a){var C;if(!o.matter||!o.decision||!o.event)return Rs(a);const c=o.matter.name,d=o.decision,l=(C=o.event_minutes_item)==null?void 0:C.decision,m=`/matters/${o.matter.id}`,p=o.matter.keywords,g=o.event.event_datetime,v=`/events/${o.event.id}`,y=o.event.body.name;return r(Is,{index:a,legislationName:c,voteDecision:d,councilDecision:l,legislationLink:m,legislationTags:p,meetingDate:g,meetingLink:v,committeeName:y,columnNames:n,columnDistribution:s},`voting-table-row-${a}`)}return r(Qt,{data:e,columnDistribution:s,columnNames:n,caption:r("p",{children:`${t}'s Voting Record`}),renderRow:i})};S.div({marginBottom:16,display:"flex",flexDirection:"column",[`@media (min-width:${$.tablet})`]:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},"& > h1":{marginBottom:0},"& > :last-child":{fontSize:de.font_size_6}});function Jt(t){return r("div",{children:r(W,{to:`/people/${t.id}`,children:t.name})})}const $s=({currentPeople:t,allPeople:e})=>f("div",{children:[r("h3",{children:"Currently Elected"}),t&&t.map(n=>{if(n.person)return Jt(n.person)}),r("h3",{children:"All"}),e&&e.map(n=>Jt(n))]});class zs{constructor(e){this.id=e.id,this.name=e.name,e.external_source_id&&(this.external_source_id=e.external_source_id),e.electoral_area&&(this.electoral_area=e.electoral_area),e.electoral_type&&(this.electoral_type=e.electoral_type),e.image_ref&&(e.image_ref instanceof N?this.image_ref=e.image_ref.id:typeof e.image_ref=="object"&&(this.image=new pe(e.image_ref)))}}var Q;(function(t){t.ALTERNATE="Alternate",t.CHAIR="Chair",t.VICE_CHAIR="Vice Chair",t.COUNCILMEMBER="Councilmember",t.MEMBER="Member",t.COUNCIL_PRESIDENT="Council President"})(Q||(Q={}));function Ts(t,e){return t.filter(n=>n.title===e)}function Ns(t){const e={};return t.filter(n=>{var s;if((s=n.body)==null?void 0:s.id)return e[n.body.id]===!0?!1:(e[n.body.id]=!0,!0)})}function Fs(t){return Ns(t).filter(e=>e.title===Q.COUNCILMEMBER?!1:e.end_datetime?e.end_datetime>new Date:!0).sort((e,n)=>e.title===Q.CHAIR||e.title===Q.VICE_CHAIR&&n.title!==Q.CHAIR||e.title===Q.ALTERNATE&&n.title!==Q.MEMBER?-1:1)}class Ze{constructor(e){this.id=e.id,this.person_ref=e.person_ref.id,this.seat_ref=e.seat_ref.id,this.start_datetime=j(e.start_datetime),e.title&&Object.values(Q).includes(e.title)?this.title=e.title:this.title=Q.MEMBER,e.end_datetime&&(this.end_datetime=j(e.end_datetime)),typeof e.person_ref=="object"&&!(e.person_ref instanceof N)&&(this.person=new Se(e.person_ref)),e.body_ref&&(e.body_ref instanceof N?this.body_ref=e.body_ref.id:typeof e.body_ref=="object"&&(this.body=new ze(e.body_ref))),typeof e.seat_ref=="object"&&!(e.seat_ref instanceof N)&&(this.seat=new zs(e.seat_ref)),e.external_source_id&&(this.external_source_id=e.external_source_id)}}class Zt extends D{constructor(e){super(u.Role,e)}async getPopulatedRolesByPersonId(e){const n=new L(u.Body,w.RoleBodyRef),s=this.networkService.getDocuments(u.Role,[V(w.RolePersonRef,B.eq,O(F.getDb(),u.Person,e)),J("start_datetime",G.desc)],new H([n]));return this.createModels(s,Ze,`getPopulatedRolesByPersonId(${e})`)}async getCouncilMemberRolesByPersonId(e){const n=new L(u.Seat,w.RoleSeatRef),s=this.networkService.getDocuments(u.Role,[V(w.RolePersonRef,B.eq,O(F.getDb(),u.Person,e)),V("title",B.eq,Q.COUNCILMEMBER),J("start_datetime",G.desc)],new H([n]));return this.createModels(s,Ze,`getCouncilMemberRolesByPersonId(${e})`)}async getCurrentRoles(){const e=new L(u.Person,w.RolePersonRef),n=this.networkService.getDocuments(u.Role,[V("end_datetime",B.eq,null)],new H([e]));return this.createModels(n,Ze,"getCurrentRoles")}}const Ps=()=>{const{firebaseConfig:t}=K(),e=h.exports.useCallback(async()=>{const s=new Ot(t),i=new Zt(t),[o,a]=await Promise.all([i.getCurrentRoles(),s.getAllPeople()]);return{currentPeople:o,allPeople:a}},[t]),{state:n}=ee({isLoading:!1,error:null,hasFetchRequest:!0},e);return r(be,{isLoading:n.isLoading,error:n.error,children:n.data&&r($s,M({},n.data))})},Xt={objectFit:"cover",position:"absolute",width:200,height:200,top:"400px",left:"190px",borderRadius:100},Ls=({personPictureSrc:t,personName:e})=>t?r("img",{style:Xt,className:"mzp-c-card-image",src:t,alt:`Picture of ${e}`}):r("div",{style:Xt,children:r(Pt,{})});var Bs="/cdp-frontend/assets/dave-hoefler-reduced-1.51b148fe.jpg",Vs="/cdp-frontend/assets/dave-hoefler-reduced-2.22148879.jpg",As="/cdp-frontend/assets/dave-hoefler-reduced-3.796c3192.jpg",Us="/cdp-frontend/assets/dave-hoefler-reduced-4.d61f5fac.jpg",qs="/cdp-frontend/assets/dave-hoefler-reduced-5.8b230200.jpg";const Yt=[Bs,Vs,As,Us,qs],Gs=S.img(()=>({objectFit:"cover",width:1400,height:400})),Hs=({personName:t,personPictureSrc:e,seatPictureSrc:n,electoralArea:s})=>f("div",{children:[r(Gs,{className:"mzp-c-card-image",src:n||Yt[Math.floor(Math.random()*Yt.length)],alt:`${s||"Default Image, no Elector Seat Image Available"}`}),r(Ls,{personPictureSrc:e,personName:t})]});function Kt(t){const e=t%10,n=t%100;return e==1&&n!=11?`${t}st`:e==2&&n!=12?`${t}nd`:e==3&&n!=13?`${t}rd`:`${t}th`}function Ds(t,e,n,s,i){var _,k;const o=e[0],a=Ts(n,Q.CHAIR).filter(E=>!E.end_datetime||E.end_datetime>new Date).map(E=>{var x;return((x=E.body)==null?void 0:x.name)||"Unknown Board"}),c=Fs(n),d=t.name?[t.name.substring(t.name.lastIndexOf(" ")+1,t.name.length)]:"Unknown Name",l=`${o.title} ${d}`,m=`${l} represents ${(_=o.seat)==null?void 0:_.electoral_area} as ${o.title} of ${(k=o.seat)==null?void 0:k.name}.`,p=`${l} is serving their ${Kt(e.length)} term as a councilmember in ${s}.`,g=a.length>0?`They currently serve as Chair of the following bodies: ${a.join(", ")}.`:"They currently hold no Chairs.",v=`They have sponsored ${i.length} pieces of legislation.`,y=[m,p,g,v].join(" ");let C=[];return c&&c.length>0&&(C=c.map(E=>{var x;return`${E.title} of the ${((x=E.body)==null?void 0:x.name)||"Unknown Board"}`})),{bioText:y,memberships:C}}const Qs=({person:t,councilMemberRoles:e,roles:n,mattersSponsored:s})=>{const{municipality:i}=K(),{bioText:o,memberships:a}=Ds(t,e,n,i.name,s),c=`Visit ${t.name}'s website`;return f("div",{style:{display:"flex",flexDirection:"column",paddingTop:120,paddingLeft:100},children:[r("p",{className:"mzp-c-card-desc",children:o}),a&&a.length>0&&f("div",{children:[r("p",{className:"mzp-c-card-desc",children:"They are currently part of the following bodies:"}),r("ul",{className:"mzp-u-list-styled",children:a.map((d,l)=>r("li",{children:d},`${l}-membership-in-body`))})]}),t.website&&r("a",{target:"_blank",rel:"noopener noreferrer",href:t.website,children:c})]})},Os=({person:t,councilMemberRoles:e,roles:n,mattersSponsored:s,personPictureSrc:i,seatPictureSrc:o})=>{var d,l,m;const a=`Contact ${t.name}`,c=e[0];return f("div",{children:[r("h3",{children:t.name}),((d=c.seat)==null?void 0:d.name)&&r("h4",{children:(l=c.seat)==null?void 0:l.name}),r(Hs,{personName:t.name,personPictureSrc:i,seatPictureSrc:o,electoralArea:(m=c.seat)==null?void 0:m.electoral_area}),f("div",{style:{display:"flex",flexDirection:"row"},children:[f("div",{style:{display:"flex",flexDirection:"column",height:300,alignItems:"center",justifyContent:"center",paddingTop:120},children:[r("p",{className:"mzp-c-card-bold",children:a}),t.email&&r("p",{className:"mzp-c-card-desc",children:t.email}),t.phone&&r("p",{className:"mzp-c-card-desc",children:t.phone})]}),r(Qs,{person:t,councilMemberRoles:e,roles:n,mattersSponsored:s})]})]})},Ws=({person:t,votes:e,roles:n,councilMemberRoles:s,mattersSponsored:i,personPictureSrc:o,seatPictureSrc:a})=>{var l,m;const c=re.exports.useMediaQuery({query:`(max-width: ${$.largeMobile})`}),d=s[0];return me(t.name),f("div",{children:[c?r(ks,{personName:t.name,personPictureSrc:o,personIsActive:d.end_datetime?d.end_datetime>new Date:!0,seatName:((l=d.seat)==null?void 0:l.name)||"No name",seatElectoralArea:((m=d.seat)==null?void 0:m.electoral_area)||"No Electoral Area",seatPictureSrc:a,chairedBodyNames:"",tenureStatus:`${Kt(s.length)} term`,billsSponsored:i.length}):r(Os,{person:t,personPictureSrc:o,seatPictureSrc:a,councilMemberRoles:s,roles:n,mattersSponsored:i}),r("br",{}),r(Ms,{name:t.name,votesPage:e})]})};class Js{constructor(e){this.id=e.id,this.person_ref=e.person_ref.id,this.matter_ref=e.matter_ref.id,e.external_source_id&&(this.external_source_id=e.external_source_id),typeof e.person_ref=="object"&&!(e.person_ref instanceof N)&&(this.person=new Se(e.person_ref)),typeof e.matter_ref=="object"&&!(e.matter_ref instanceof N)&&(this.matter=new We(e.matter_ref))}}class Zs extends D{constructor(e){super(u.MatterSponsor,e)}async getMattersSponsoredByPersonId(e){const n=new L(u.Matter,w.MatterSponsorMatterRef),s=this.networkService.getDocuments(u.MatterSponsor,[V(w.MatterSponsorPersonRef,B.eq,O(F.getDb(),u.Person,e))],new H([n]));return this.createModels(s,Js,`getMattersSponsoredByPersonId(${e})`)}}class Xs extends D{constructor(e){super(u.File,e)}async getFileById(e){const n=this.networkService.getDocument(e,u.File);return this.createModel(n,pe,`getFileById(${e})`)}}const Ys=()=>{const{id:t}=nt(),{firebaseConfig:e}=K(),n=h.exports.useCallback(async()=>{const i=new Ot(e),o=new Ft(e),a=new Zs(e),c=new Zt(e),d=new Xs(e),{networkService:l}=d,[m,p,g,v,y]=await Promise.all([i.getPersonById(t),o.getFullyPopulatedVotesByPersonId(t),a.getMattersSponsoredByPersonId(t),c.getCouncilMemberRolesByPersonId(t),c.getPopulatedRolesByPersonId(t)]);if(v.length===0)throw new Error(`${m.name} is not a ${Q.COUNCILMEMBER}`);const C=[m.picture?l.getDownloadUrl(m.picture.uri):Promise.resolve(void 0)];if(v[0].seat&&v[0].seat.image_ref){const x=await d.getFileById(v[0].seat.image_ref);C.push(l.getDownloadUrl(x.uri))}else C.push(Promise.resolve(void 0));const[_,k]=await Promise.all(C);return{person:m,votes:p,mattersSponsored:g,roles:y,personPictureSrc:_,seatPictureSrc:k,councilMemberRoles:v}},[t,e]),{state:s}=ee({isLoading:!1,error:null,hasFetchRequest:!0},n);return r(be,{isLoading:s.isLoading,error:s.error,children:s.data&&r(Ws,M({},s.data))})};const Ks=S.div({minHeight:"100vh",display:"flex",flexDirection:"column"}),js=S.main({boxSizing:"border-box",width:"100%",padding:"16px",flex:1,alignSelf:"center",display:"flex",flexDirection:"column",[`@media (min-width:${$.tablet})`]:{padding:"32px",maxWidth:"1280px"}});function ei(){me(b.council_data_project);const{municipality:t}=K();return r(ge,{children:r(wr,{basename:"/",children:f(Ks,{children:[r(Tr,{municipalityName:t.name}),r(js,{children:f(xr,{children:[r(ue,{exact:!0,path:"/",children:r(Zr,{})}),r(ue,{exact:!0,path:`/${q.EVENT}`,children:r(Ss,{})}),r(ue,{exact:!0,path:`/${q.EVENT}/search`,children:r(mn,{})}),r(ue,{exact:!0,path:`/${q.EVENT}/:id`,children:r(ys,{})}),r(ue,{exact:!0,path:"/people",children:r(Ps,{})}),r(ue,{exact:!0,path:"/people/:id",children:r(Ys,{})})]})}),r(Fr,{footerLinksSections:t.footerLinksSections})]})})})}Sr.render(r(ae.StrictMode,{children:r(Er,{appConfig:{firebaseConfig:{options:{projectId:"cdp-seattle-staging-dbengvtn"},settings:{}},municipality:{name:"Seattle Staging",footerLinksSections:[]}},children:r(ei,{})})}),document.getElementById("root"));
